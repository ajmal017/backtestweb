<?php
date_default_timezone_set("PRC");
require_once(dirname(__FILE__) . "/common/Request.class.php");
require_once(dirname(__FILE__) . "/common/iwookongConfig.class.php");
require_once(dirname(__FILE__) . "/common/CheckUserLogin.class.php");
require_once(dirname(__FILE__) . "/common/Utility.class.php");
ob_start("ob_gzhandler");
if (CheckLogin::check() == -1) {
    header("Location:login.php ");
    exit();
}
$industryName = isset($_GET['name']) ? $_GET['name'] : "";
if (empty($industryName)) {
    header("Location:error.php");
    exit();
}
$related_info_result = RequestUtil::get(iwookongConfig::$requireUrl . "information/1/related_info.fcgi",
    array(
        "user_id" => $_SESSION['user_id'],
        "token" => $_SESSION["token"],
        "query_type" => 2,
        "key" => $industryName,
        "start_id" => 0,
        "info_type_list" => "1,1,1,1,1,1"
    ));
$json_ris = json_decode($related_info_result, true);
if ($json_ris["status"] != "1") {
    header("Location:error.php");
    exit();
}
$related_industry_result = RequestUtil::get(iwookongConfig::$requireUrl . "stock/1/top_twenty_stock.fcgi", array(
    "user_id" => $_SESSION['user_id'],
    "token" => $_SESSION["token"],
    "hy" => $industryName
));
$json_industry = json_decode($related_industry_result, true);
if ($json_industry["status"] != "1") {
    header("Location:error.php");
    exit();
}
$stock_v = $json_industry["result"]["code_info"]["shv_"];//热股查看
$stock_s = $json_industry["result"]["code_info"]["shs_"];//热股搜索
$stock_f = $json_industry["result"]["code_info"]["shf_"];//热股关注
$stock_map_v = $json_industry["result"]["code_info"]["suv_"];//热股查看热力图
$stock_map_s = $json_industry["result"]["code_info"]["sus_"];//热股搜索热力图
$stock_map_f = $json_industry["result"]["code_info"]["suf_"];//热股关注热力图

//行业折线图
$stock_line_result = RequestUtil::get(iwookongConfig::$requireUrl . "stock/1/hy_and_gn_hot.fcgi",
    array(
        "user_id" => $_SESSION['user_id'],
        "token" => $_SESSION["token"],
        "query_type" => 1,
        "key" => $industryName
    ));
$json_line = json_decode($stock_line_result, true);
$viewdata = "";
$searchdata = "";
$followdata = "";
if ($json_line["status"] == "1") {
    for ($i = 0; $i < count($json_line["visit"]); $i++) {
        $viewdata .= $json_line["visit"][$i] . ($i + 1 < count($json_line["visit"]) ? "," : "");
    }
    for ($i = 0; $i < count($json_line["search"]); $i++) {
        $searchdata .= $json_line["search"][$i] . ($i + 1 < count($json_line["search"]) ? "," : "");
    }
    for ($i = 0; $i < count($json_line["follow"]); $i++) {
        $followdata .= $json_line["follow"][$i] . ($i + 1 < count($json_line["follow"]) ? "," : "");
    }
} else {
    header("Location:error.php");
    exit();
}

?>
    <!DOCTYPE html><html lang="zh-CN"><head> <meta charset="UTF-8"> <title><?php echo $industryName ?>行业热度情况</title> <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> <meta name="viewport" content="width=device-width, initial-scale=1"> <link rel="stylesheet" href="http://cdn.bootcss.com/bootstrap/3.3.6/css/bootstrap.min.css"> <link rel="stylesheet" href="http://cdn.bootcss.com/bootstrap/3.3.6/css/bootstrap-theme.min.css"> <link rel="stylesheet" href="http://cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css"> <link rel="stylesheet" href="http://cdn.bootcss.com/malihu-custom-scrollbar-plugin/3.1.3/jquery.mCustomScrollbar.min.css"> <link rel="stylesheet" href="staticplugins/typeahead/jquery.typeahead.min.css"> <link rel="stylesheet" href="staticcss/common.min.css"> <link rel="stylesheet" href="staticcss/wookong/index.min.css"></head><body><?php include("share/_header.php") ?><div class="container wk-container"> <section class="wk-time-hot"> <p class="wk-hot-title"><?php echo $industryName ?>行业热度情况&nbsp; <i class="fa fa-question-circle-o" data-toggle="popover" data-content="<?php echo $industryName ?>行业每小时产生的热度量"></i></p> <div class="col-md-8 left-charts" id="left-chart"> </div> <div class="col-md-4 right-infos"> <p> <?php echo $industryName ?>最近热度 &nbsp;<i class="fa fa-question-circle-o" data-toggle="popover" data-placement="bottom" data-content=""></i> </p> <hr> <table class="table table-condensed first-table"> <?php if (count($json_line["visit"]) > 0) { $view = explode(",", $viewdata); echo "<tr><td>查看</td><td>" . end($view) . "</td><td>" . date("Y-m-d H:00") . "</td></tr>"; } else { echo "<tr><td>查看</td><td>-</td><td>-</td></tr>"; } ?> <?php if (count($json_line["search"]) > 0) { $search = explode(",", $searchdata); echo "<tr><td>搜索</td><td>" . end($search) . "</td><td>" . date("Y-m-d H:00") . "</td></tr>"; } else { echo "<tr><td>搜索</td><td>-</td><td>-</td></tr>"; } ?> <?php if (count($json_line["follow"]) > 0) { $follow = explode(",", $followdata); echo "<tr><td>关注</td><td>" . end($follow) . "</td><td>" . date("Y-m-d H:00") . "</td></tr>"; } else { echo "<tr><td>关注</td><td>-</td><td>-</td></tr>"; } ?> </table> <p><?php echo $industryName ?>今日最热度</p> <hr> <table class="table table-condensed"> <?php if (count($json_line["visit"]) > 0) { $vmax = (int)array_search(max($json_line["visit"]), $json_line["visit"]); echo "<tr><td>查看</td><td>" . ($vmax - 1 < 0 ? "0" : $vmax - 1) . ":00 - " . $vmax . ":00</td></tr>"; } else { echo "<tr><td>查看</td><td>-</td></tr>"; } ?> <?php if (count($json_line["search"]) > 0) { $smax = (int)array_search(max($json_line["search"]), $json_line["search"]); echo "<tr><td>搜索</td><td>" . ($smax - 1 < 0 ? "0" : $smax - 1) . ":00 - " . $smax . ":00</td></tr>"; } else { echo "<tr><td>搜索</td><td>-</td></tr>"; } ?> <?php if (count($json_line["follow"]) > 0) { $fmax = (int)array_search(max($json_line["follow"]), $json_line["follow"]); echo "<tr><td>关注</td><td>" . ($fmax - 1 < 0 ? "0" : $fmax - 1) . ":00 - " . $fmax . ":00</td></tr>"; } else { echo "<tr><td>关注</td><td>-</td></tr>"; } ?> </table> </div> </section> <section class="wk-all-hot"> <?php if ($json_ris["status"] == "1") { ?> <div class="wk-con-news"> <p class="wk-hot-title">关联资讯 <span>关联股票：</span> <?php foreach ($json_ris["stock"] as $stocks) { echo "<a href='stocks.php?stock=" . $stocks['stock_code'] . "' target='_blank'>" . $stocks['stock_name'] . "</a>"; } ?> <span>关联行业：</span> <?php foreach ($json_ris["industry"] as $industry) { echo "<a href='industry.php?name=" . $industry['industry'] . "' target='_blank'>" . $industry['industry'] . "</a>"; } ?> <span>关联概念：</span> <?php foreach ($json_ris["notion"] as $section) { echo "<a href='concept.php?name=" . $section['section'] . "' target='_blank'>" . $section['section'] . "</a>"; } ?> </p> <div class="wk-con-box"> <ul class="nav nav-tabs" role="tablist"> <li role="presentation" class="active"><a href="#wk-news" aria-controls="wk-news" role="tab" data-toggle="tab">新闻</a></li> <li role="presentation"><a href="#wk-selfmedia" aria-controls="wk-selfmedia" role="tab" data-toggle="tab"><label></label>达人观点</a></li> <li role="presentation"><a href="#wk-newsflash" aria-controls="wk-newsflash" role="tab" data-toggle="tab">快讯</a></li> </ul> <div class="tab-content"> <div role="tabpanel" class="tab-pane active" id="wk-news"> <?php if (count($json_ris["news"]) > 0) { for ($i = 0; $i < count($json_ris["news"]); $i++) { $news = $json_ris["news"][$i]; ?> <div class="wk-news-list" id="news_<?php echo $news["info_id"] ?>"> <div class="wk-news-list-head"> <label class="wk-news-title-num"><?php echo (string)($i + 1) ?></label> <p class="wk-news-list-title"><a href="detail.php?infoid=<?php echo $news["info_id"] ?>" target="_blank"><?php echo $news["title"] ?></a></p> <?php echo UtilityTools::getEmotion((int)$news["sentiment"]) ?> </div> <div class="wk-news-list-con"> <p> <?php echo empty($news["summary"]) ? "" : "<strong>【机器人摘要】</strong>" . preg_replace('/\s| /', '', $news["summary"]) . "<a href=\"detail.php?infoid=" . $news["info_id"] . "\" target=\"_blank\"><i class=\"fa fa-link\"></i>详情链接</a>" ?> </p> <span>来源：<?php echo empty($news["from"]) ? "未知" : $news["from"] ?>&nbsp;&nbsp;&nbsp;&nbsp;<?php echo date('Y-m-d H:i', $news["timestamp"] / 1000); ?></span> </div> <hr> </div> <?php } } else { ?> <div class="wk-news-no"> <img src="staticimgs/i/nonews.png"><span>暂无相关新闻资讯</span> </div> <?php } ?> </div> <div role="tabpanel" class="tab-pane fade" id="wk-selfmedia"> <?php if (count($json_ris["me_media"]) > 0) { foreach ($json_ris["me_media"] as $media) { ?> <div class="wk-news-list" id="media_<?php echo $media["info_id"] ?>"> <div class="wk-news-list-head"> <p class="wk-news-list-title"><a href="detail.php?infoid=<?php echo $media["info_id"] ?>" target="_blank"><?php echo $media["title"] ?></a></p> <?php echo UtilityTools::getEmotion((int)$media["sentiment"]) ?> </div> <div class="wk-news-list-con"> <p> <?php echo empty($media["summary"]) ? "" :"<strong>【机器人摘要】</strong>" . preg_replace('/\s| /', '', $media["summary"]) . "<a href=\"detail.php?infoid=" . $media["info_id"] . "\" target=\"_blank\"><i class=\"fa fa-link\"></i>详情链接</a>" ?> </p> <span>来源：<?php echo empty($media["from"]) ? "未知" : $media["from"] ?>&nbsp;&nbsp;&nbsp;&nbsp;<?php echo date('Y-m-d H:i', $media["timestamp"] / 1000); ?></span> </div> <hr> </div> <?php } } else { ?> <div class="wk-news-no"> <img src="staticimgs/i/nonews.png"><span>暂无相关达人观点</span> </div> <?php } ?> </div> <div role="tabpanel" class="tab-pane fade" id="wk-newsflash"> <div class="wk-news-list"> <table class="table"> <?php if (count($json_ris["fast_info"]) > 0) { for ($i = 0; $i < count($json_ris["fast_info"]); $i++) { ?> <tr id="fast_<?php echo $json_ris["fast_info"][$i]["info_id"] ?>"> <td><label><?php echo date('H:i', $json_ris["fast_info"][$i]["timestamp"] / 1000) ?></label></td> <td><?php echo $json_ris["fast_info"][$i]["summary"] ?></td> </tr> <?php } } else { ?> <div class="wk-news-no"> <img src="staticimgs/i/nonews.png"><span>暂无相关快讯</span> </div> <?php } ?> </table> </div> </div> </div> </div> </div> <?php } ?> <div class="wk-con-industry"> <p class="wk-hot-title"><?php echo $industryName ?>行业热度情况</p> <div class="wk-con-box"> <ul class="nav nav-tabs" role="tablist"> <li role="presentation" class="active"><a href="#industry-view" aria-controls="industry-view" role="tab" data-toggle="tab">查看热度</a></li> <li role="presentation"><a href="#industry-search" aria-controls="industry-search" role="tab" data-toggle="tab">搜索热度</a></li> <li role="presentation"><a href="#industry-follow" aria-controls="industry-follow" role="tab" data-toggle="tab">关注热度</a></li> </ul> <span class="wk-hot-time">数据日期:<?php echo date("Y-m-d H:"); echo UtilityTools::getNowMinute() ?></span> <div class="tab-content"> <div role="tabpanel" class="tab-pane active" id="industry-view"> <div class="col-md-5 left"> <p class="wk-hot-sub-title">查看热度排行&nbsp;<i class="fa fa-question-circle-o" data-toggle="popover" data-content="截至当前产生的总热度量的排行"></i></p> <table class="table table-hover table-condensed table-striped wk-hot-table"> <thead> <tr> <td>序号</td> <td>股票名称</td> <td>关注热度</td> <td>热度增量</td> <td>价格</td> </tr> </thead> <tbody> <?php for ($i = 0; $i < count($stock_v); $i++) { ?> <tr> <td><?php echo $i + 1 ?></td> <td><a href="stocks.php?stock=<?php echo $stock_v[$i]["code"] ?>" target="_blank"><?php echo $stock_v[$i]["name"] ?></a></td> <td><?php echo $stock_v[$i]["value"] ?></td> <td> <?php if ((float)$stock_v[$i]["increment"] > 0) { echo $stock_v[$i]["increment"] . "<span class='wk-red'>↑</span>"; } elseif ((float)$stock_v[$i]["increment"] < 0) { echo $stock_v[$i]["increment"] . "<span class='wk-green'>↓</span>"; } else { echo $stock_v[$i]["increment"]; } ?> </td> <?php if ((float)$stock_v[$i]["price"] == 0) { echo "<td class=\"wk-gray\">未交易</td>"; } else { echo "<td class=\"" . UtilityTools::getPriceColor((float)$stock_v[$i]["mark_z_d"]) . "\">" . $stock_v[$i]["price"] . "</td>"; } ?> </tr> <?php } ?> </tbody> </table> </div> <div class="col-md-7 right"> <p class="wk-hot-sub-title">查看热度涨跌幅排行&nbsp;<i class="fa fa-question-circle-o" data-toggle="popover" data-content="当前最新与前一个小时的热度指标相比较产生的数值"></i></p> <div class="charts" id="wk-stock-view-treemap"></div> <p class="wk-hot-sub-tips"><label>●</label>方块大小表示成交量，越大的板块成交量越大</p> <p class="wk-hot-sub-tips"><label>●</label>方块颜色表示热度涨跌幅，涨跌越大，颜色越深，上涨红色，下跌绿色</p> </div> </div> <div role="tabpanel" class="tab-pane fade" id="industry-search"> <div class="col-md-5 left"> <p class="wk-hot-sub-title">搜索热度排行&nbsp;<i class="fa fa-question-circle-o" data-toggle="popover" data-content="截至当前产生的总热度量的排行"></i></p> <table class="table table-hover table-condensed table-striped wk-hot-table"> <thead> <tr> <td>序号</td> <td>股票名称</td> <td>关注热度</td> <td>热度增量</td> <td>价格</td> </tr> </thead> <tbody> <?php for ($i = 0; $i < count($stock_s); $i++) { ?> <tr> <td><?php echo $i + 1 ?></td> <td><a href="stocks.php?stock=<?php echo $stock_s[$i]["code"] ?>" target="_blank"><?php echo $stock_s[$i]["name"] ?></a></td> <td><?php echo $stock_s[$i]["value"] ?></td> <td> <?php if ((float)$stock_s[$i]["increment"] > 0) { echo $stock_s[$i]["increment"] . "<span class='wk-red'>↑</span>"; } elseif ((float)$stock_s[$i]["increment"] < 0) { echo $stock_s[$i]["increment"] . "<span class='wk-green'>↓</span>"; } else { echo $stock_s[$i]["increment"]; } ?> </td> <?php if ((float)$stock_s[$i]["price"] == 0) { echo "<td class=\"wk-gray\">未交易</td>"; } else { echo "<td class=\"" . UtilityTools::getPriceColor((float)$stock_s[$i]["mark_z_d"]) . "\">" . $stock_s[$i]["price"] . "</td>"; } ?> </tr> <?php } ?> </tbody> </table> </div> <div class="col-md-7 right"> <p class="wk-hot-sub-title">搜索热度涨跌幅排行&nbsp;<i class="fa fa-question-circle-o" data-toggle="popover" data-content="当前最新与前一个小时的热度指标相比较产生的数值"></i></p> <div class="charts" id="wk-stock-search-treemap"></div> <p class="wk-hot-sub-tips"><label>●</label>方块大小表示成交量，越大的板块成交量越大</p> <p class="wk-hot-sub-tips"><label>●</label>方块颜色表示热度涨跌幅，涨跌越大，颜色越深，上涨红色，下跌绿色</p> </div> </div> <div role="tabpanel" class="tab-pane fade" id="industry-follow"> <div class="col-md-5 left"> <p class="wk-hot-sub-title">关注热度排行&nbsp;<i class="fa fa-question-circle-o" data-toggle="popover" data-content="截至当前产生的总热度量的排行"></i></p> <table class="table table-hover table-condensed table-striped wk-hot-table"> <thead> <tr> <td>序号</td> <td>股票名称</td> <td>关注热度</td> <td>热度增量</td> <td>价格</td> </tr> </thead> <tbody> <?php for ($i = 0; $i < count($stock_f); $i++) { ?> <tr> <td><?php echo $i + 1 ?></td> <td><a href="stocks.php?stock=<?php echo $stock_f[$i]["code"] ?>" target="_blank"><?php echo $stock_f[$i]["name"] ?></a></td> <td><?php echo $stock_f[$i]["value"] ?></td> <td> <?php if ((float)$stock_f[$i]["increment"] > 0) { echo $stock_f[$i]["increment"] . "<span class='wk-red'>↑</span>"; } elseif ((float)$stock_f[$i]["increment"] < 0) { echo $stock_f[$i]["increment"] . "<span class='wk-green'>↓</span>"; } else { echo $stock_f[$i]["increment"]; } ?> </td> <?php if ((float)$stock_f[$i]["price"] == 0) { echo "<td class=\"wk-gray\">未交易</td>"; } else { echo "<td class=\"" . UtilityTools::getPriceColor((float)$stock_f[$i]["mark_z_d"]) . "\">" . $stock_f[$i]["price"] . "</td>"; } ?> </tr> <?php } ?> </tbody> </table> </div> <div class="col-md-7 right"> <p class="wk-hot-sub-title">关注热度涨跌幅排行&nbsp;<i class="fa fa-question-circle-o" data-toggle="popover" data-content="当前最新与前一个小时的热度指标相比较产生的数值"></i></p> <div class="charts" id="wk-stock-follow-treemap"></div> <p class="wk-hot-sub-tips"><label>●</label>方块大小表示成交量，越大的板块成交量越大</p> <p class="wk-hot-sub-tips"><label>●</label>方块颜色表示热度涨跌幅，涨跌越大，颜色越深，上涨红色，下跌绿色</p> </div> </div> </div> </div> </div> </section></div><script src="http://cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script><script src="http://cdn.bootcss.com/bootstrap/3.3.6/js/bootstrap.min.js"></script><script src="http://cdn.bootcss.com/echarts/3.1.10/echarts.min.js"></script><script src="http://cdn.bootcss.com/malihu-custom-scrollbar-plugin/3.1.3/jquery.mCustomScrollbar.concat.min.js"></script><script src="staticplugins/typeahead/jquery.typeahead.min.js"></script><script src="static/js/all.min.js"></script><script src="static/js/common.min.js"></script><script src="static/js/Utility.min.js"></script><script> var name=Utility.getQueryStringByName("name");$(function(){$("i[data-toggle='popover']").popover({container:"body",trigger:"hover"});var arrData={query_type:2,key:"<?php echo $industryName?>",start_id:0,info_type_list:""};$("#wk-news").mCustomScrollbar({autoHideScrollbar:true,theme:"minimal-dark",axis:"y",callbacks:{onTotalScrollOffset:150,onTotalScroll:function(){arrData.start_id=$("#wk-news .wk-news-list:last").attr("id").replace("news_","");arrData.info_type_list="1,0,0,0,0,0";common.getNews(arrData)}}});$("#wk-selfmedia").mCustomScrollbar({autoHideScrollbar:true,theme:"minimal-dark",axis:"y",callbacks:{onTotalScrollOffset:150,onTotalScroll:function(){arrData.start_id=$("#wk-selfmedia .wk-news-list:last").attr("id").replace("media_","");arrData.info_type_list="0,0,1,0,0,0";common.getSelfMedia(arrData)}}});$("#wk-newsflash").mCustomScrollbar({autoHideScrollbar:true,theme:"minimal-dark",axis:"y",callbacks:{onTotalScrollOffset:150,onTotalScroll:function(){arrData.start_id=$("#wk-newsflash .wk-news-list tr:last").attr("id").replace("fast_","");arrData.info_type_list="0,1,0,0,0,0";common.getFastNews(arrData)}}});$('a[data-toggle="tab"]').on('shown.bs.tab',function(){initTreemap()});initLineChart();initTreemap()});var viewData=[<?php echo $viewdata?>];var searchData=[<?php echo $searchdata?>];var followdata=[<?php echo $followdata?>];function initLineChart(){var myChart=echarts.init(document.getElementById("left-chart"));myChart.setOption({color:["rgb(243, 104, 97)","rgb(76, 93, 186)","rgb(118, 172, 245)"],tooltip:{trigger:"axis",formatter:function(params){var showLabel="";showLabel+=params[0].name+"<br>";for(p in params){if(params[p].value!=0){showLabel+="<label style='color: "+params[p].color+";font-size: 18px;'>●</label> "+params[p].seriesName+":"+params[p].value+"<br>"}}return showLabel}},grid:{top:"12%",left:"3%",right:"5%",bottom:"12%",containLabel:true},legend:{left:"left",data:["查看","搜索","关注"],padding:[0,0,0,15]},xAxis:{type:"category",boundaryGap:false,data:["0:00","1:00","2:00","3:00","4:00","5:00","6:00","7:00","8:00","9:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00","20:00","21:00","22:00","23:00","24：00"]},yAxis:{type:"value",position:"right",scale:true,min:1},series:[{name:"查看",type:"line",smooth:true,symbolSize:function(value){return value==0?0:4},data:viewData},{name:"搜索",type:"line",smooth:true,symbolSize:function(value){return value==0?0:4},data:searchData},{name:"关注",type:"line",smooth:true,symbolSize:function(value){return value==0?0:4},data:followdata}]});window.onresize=myChart.resize};var wk_treemap_data=<?php $jsonData="[";$jsonData.="{\"key\":\"wk-stock-view-treemap\",\"value\":".json_encode($stock_map_v)."},";$jsonData.="{\"key\":\"wk-stock-search-treemap\",\"value\":".json_encode($stock_map_s)."},";$jsonData.="{\"key\":\"wk-stock-follow-treemap\",\"value\":".json_encode($stock_map_f)."}]";echo $jsonData;?>;function initTreemap(){for(var x in wk_treemap_data){if(Utility.timeRange("09:15","09:25")){$("#"+wk_treemap_data[x].key).html("<div class=\"wk-hotmap-no\"><img src=\"staticimgs/i/nonews.png\"><span>自由竞价时间,暂无数据</span></div>")}else{var myChart=echarts.init(document.getElementById(""+wk_treemap_data[x].key+""));var cdata=[];for(var y in wk_treemap_data[x].value){var tname=wk_treemap_data[x].value[y].name;var tcode=wk_treemap_data[x].value[y].code;var tvalue=(parseFloat(wk_treemap_data[x].value[y].value)*100).toFixed(2);var tpricelevel=wk_treemap_data[x].value[y].price_level;var tstop=wk_treemap_data[x].value[y].stop;if(tstop==1){cdata.push("{name:\""+tname+"\\n("+tcode+")\\n"+(tvalue>0?"+":"")+tvalue+"%\"")}else{cdata.push("{name:\""+tname+"\\n("+tcode+")\\n"+(tvalue>0?"+":"")+tvalue+"%\"")}cdata.push("value:"+wk_treemap_data[x].value[y].count);cdata.push("itemStyle:{normal:{color:'"+Utility.getTreeMapColor(tpricelevel)+"'}}");if(tpricelevel==-1){cdata.push("label:{normal:{textStyle:{color:'#23a64c'}}}}")}else if(tpricelevel==1){cdata.push("label:{normal:{textStyle:{color:'#f54545'}}}}")}else{cdata.push("label:{normal:{textStyle:{color:'#fff'}}}}")}}myChart.setOption({tooltip:{formatter:"{b}"},series:[{type:'treemap',breadcrumb:{show:false},roam:false,nodeClick:false,width:"100%",height:"100%",itemStyle:{normal:{borderWidth:1}},data:eval("["+cdata.join(',')+"]")}]});window.onresize=myChart.resize}}}</script></body></html>
<?php
ob_end_flush();
?>