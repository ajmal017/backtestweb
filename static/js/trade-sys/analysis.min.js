"use strict";$(function(){function a(){trade.getHistoryYields({opcode:130},function(){$("#income-analyze").html("<div class=\"wk-user-no\"><i class='fa fa-refresh fa-spin'></i>&nbsp;正在加载...</div>")},function(d){var v=[];var u=[];var m=[];var p=[];var w="auto";function t(z,A){for(var j in A){if(A[j]==z){return true}}return false}if(d.status==0){var x=d.stock_hist_yields;var k=[];var n=[];w=1;for(var s=0;s<x.length;s++){var g=x[s]["group_name"];var c=x[s]["yield"];u.push(x[s].date.substr(5));p.push(x[s].group_name);var f=k.length;if(!t(g,k)){k[f]=g;n[g]=""+c}else{n[g]+=","+c}}u=Utility.arrRemoveSame(u);p=Utility.arrRemoveSame(p);for(var s in n){var h=n[s].split(",");var l=u.length-h.length;if(l>0){for(var r=0;r<l;r++){n[s]="--,"+n[s]}}n[s]=n[s].split(",")}var e=echarts.init(document.getElementById("income-analyze"));var b=[{type:"value",position:"left",axisLabel:{formatter:function(i){if(i!==0){return(i*100).toFixed(0)+"%"}else{return 0}}}}];var o=[];for(var y in n){o.push({name:y,smooth:true,type:"line",data:n[y]})}var q={title:{text:"收益分析",textStyle:{color:"#000",fontStyle:"normal",fontFamily:"Microsoft YaHei",fontSize:16},subtext:"当天添加的账户，收益率收盘后计算",subtextStyle:{}},tooltip:{trigger:"axis",formatter:function(z){var i="";i+=z[0].name+"<br>";for(var j in z){if(z[j].value||z[j].value==0){if(z[0].name==z[j].name){if(z[j].value=="--"){}else{i+="<label style='color: "+z[j].color+";font-size: 14px;'>●</label>&nbsp;&nbsp;"+z[j].seriesName+":"+(z[j].value*100).toFixed(2)+"%<br>"}}}}return i}},legend:{top:"52px",data:p},grid:{top:"100px",left:"15px",right:"50px",bottom:"0",containLabel:true},xAxis:{type:"category",boundaryGap:false,data:u,show:true,axisLabel:{interval:w},axisTick:{show:true,alignWithLabel:true,interval:"auto",inside:false,length:1},splitLine:{show:false},axisLine:{show:false,onZero:true}},yAxis:b,series:o};e.setOption(q);window.onresize=e.resize}})}a()});