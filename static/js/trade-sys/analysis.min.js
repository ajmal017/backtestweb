"use strict";$(function(){function a(){trade.getHistoryYields({opcode:130},function(){$("#income-analyze").html("<div class=\"wk-user-no\"><i class='fa fa-refresh fa-spin'></i>&nbsp;正在加载...</div>")},function(d){var v=[];var u=[];var m=[];var p=[];function t(y,z){for(var j in z){if(z[j]==y){return true}}return false}if(d.status==0){var w=d.stock_hist_yields;var k=[];var n=[];for(var s=0;s<w.length;s++){var g=w[s]["group_name"];var c=w[s]["yield"];u.push(w[s].date);p.push(w[s].group_name);var f=k.length;if(!t(g,k)){k[f]=g;n[g]=""+c}else{n[g]+=","+c}}u=Utility.arrRemoveSame(u);for(var s in n){var h=n[s].split(",");var l=u.length-h.length;if(l>0){for(var r=0;r<l;r++){n[s]="--,"+n[s]}}n[s]=n[s].split(",")}var e=echarts.init(document.getElementById("income-analyze"));var b=[{type:"value",position:"left",axisLabel:{formatter:function(i){if(i!==0){return(i*100).toFixed(0)+"%"}else{return 0}}}}];var o=[];for(var x in n){o.push({name:x,smooth:true,type:"line",stack:"总量",data:n[x]})}var q={title:{text:"收益分析",textStyle:{color:"#000",fontStyle:"normal",fontFamily:"Microsoft YaHei",fontSize:16},subtext:"当天添加的账户，收益率收盘后计算",subtextStyle:{}},tooltip:{trigger:"axis",formatter:function(y){var i="";i+=y[0].name+"<br>";for(var j in y){if(y[j].value||y[j].value==0){if(y[0].name==y[j].name){if(y[j].seriesName==""||y[j].value=="--"){i+="<label style='color: "+y[j].color+";font-size: 14px;'>●</label>&nbsp;&nbsp;"+y[j].seriesName+":"+y[j].value+"<br>"}else{i+="<label style='color: "+y[j].color+";font-size: 14px;'>●</label>&nbsp;&nbsp;"+y[j].seriesName+":"+(y[j].value*100).toFixed(2)+"%<br>"}}}}return i}},legend:{top:"40px",data:p},grid:{top:"90px",left:"15px",right:"50px",bottom:"0",containLabel:true},xAxis:{type:"category",boundaryGap:false,data:u,show:true,axisLabel:{interval:0},axisTick:{show:true,alignWithLabel:true,interval:"auto",inside:false,length:1},splitLine:{show:false},axisLine:{show:false,onZero:false}},yAxis:b,series:o};e.setOption(q);window.onresize=e.resize}})}a()});