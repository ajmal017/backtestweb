"use strict";$(function(){function k(){trade.getStockPoint(function(){$(".index-items").html("<div class=\"wk-user-no\"><i class='fa fa-refresh fa-spin'></i>&nbsp;正在加载...</div>")},function(l){if(l&&l.status==1){var m=template("tpl",l);$(".index-items").html(m)}})}function i(q,p,n){var o=echarts.init(document.getElementById("profit"));var l=echarts.init(document.getElementById("loss"));var p={total:80000,month:12,per:6936.16,unit:8};var m={backgroundColor:"#fff",color:["#D14A4A","#eee"],series:[{type:"pie",radius:["50%","70%"],symbolSize:11,hoverAnimation:false,labelLine:{normal:{show:false}},data:[{value:20,name:""},{value:80,name:""}]}]};o.setOption(m);l.setOption(m)}function b(){trade.getAccountInfo(null,function(m){if(m.status==1){var l=[];var n=m.result;l.push('<div class="col-md-4 col-xs-6 fund-item">总资产: '+n.total_assets+"</div>");l.push('<div class="col-md-4 col-xs-6 fund-item">当日收益率：'+(n.yields_of_day*100).toFixed(2)+"%</div>");l.push('<div class="col-md-4 col-xs-6 fund-item">总收益率：'+(n.total_yields*100).toFixed(2)+"%</div>");l.push('<div class="col-md-4 col-xs-6 fund-item">可用资金：'+n.usable_assets+"</div>");l.push('<div class="col-md-4 col-xs-6 fund-item">当日盈亏：'+n.profit_or_loss+"</div>");l.push('<div class="col-md-4 col-xs-6 fund-item">股票市值：'+n.stock_value+"</div>");$(".fund-data .row").html(l.join(""))}})}var j;function f(){trade.getUserRelatedOp({opcode:104},null,function(n){var l=[];var o=n.group_list;for(var m=0;m<o.length;m++){if(m===0){j=o[m].id;l.push(' <li role="presentation" class="active" data-gid="'+o[m].id+'"><a href="#index1-1" role="tab" data-toggle="tab">'+o[m].name+"</a></li>")}else{l.push(' <li role="presentation" data-gid="'+o[m].id+'"><a href="#index1-1" role="tab" data-toggle="tab">'+o[m].name+"</a></li>")}}$(".myGroup ul").html(l.join(""));g(j)})}function g(l){trade.getUserRelatedOp({opcode:105,gid:l},null,function(o){var m=[];var p=o.stock_list;for(var n=0;n<p.length;n++){m.push("<tr>");m.push("<td>"+(n+1)+"</td>");m.push('<td><input type="checkbox" class="checkbox"><a href="http://stock.iwookong.com/ajax/login/nologin.php?stock='+p[n].code+"&uid="+uid+'&token=token" target="_blank">'+p[n].name+"</a></td>");m.push('<td><a href="http://stock.iwookong.com/ajax/login/nologin.php?stock='+p[n].code+"&uid="+uid+'&token=token" target="_blank">'+p[n].code+"</a></td>");m.push("<td>"+p[n].visit_heat+"</td>");m.push("<td>"+p[n].price+"</td>");m.push("<td>"+p[n].change+"</td>");m.push("<td>"+p[n].volume+"</td>");m.push("<td>"+p[n].industry+"</td>");m.push('<td class="call_back" data-groupStockList-id="'+p[n].id+'"><img src="/static/imgs/trade/op_buy.png">&nbsp<img src="/static/imgs/trade/op_sale.png"></td>');m.push("</tr>")}$(".groupStockList table tbody").html(m.join(""))})}$("body").on("click",".myGroup ul li",function(){var l=$(this).attr("data-gid");g(l)});function c(){trade.getUserRelatedOp({opcode:106},null,function(n){var l=[];var o=n.stock_list;for(var m=0;m<o.length;m++){l.push("<tr>");l.push("<td>"+(m+1)+"</td>");l.push("<td>"+o[m].code+"</td>");l.push("<td>"+o[m].holding+"</td>");l.push("<td>"+o[m].available+"</td>");l.push("<td>"+o[m].cost+"</td>");l.push("<td>"+o[m].price+"</td>");l.push("<td>"+o[m].market_value+"</td>");l.push("<td>"+o[m].profit+"</td>");l.push("<td>"+o[m].profit_ratio+"</td>");l.push("<td>"+o[m].position+"</td>");l.push('<td class="call_back" data-holding-id="'+o[m].id+'"><img src="/static/imgs/trade/op_buy.png">&nbsp<img src="/static/imgs/trade/op_sale.png"></td>');l.push("</tr>")}$(".holdingStock table tbody").html(l.join(""))})}function d(){trade.getUserRelatedOp({opcode:107},null,function(m){if(m.status==1){var o=[];var n=m.order_list;for(var l=0;l<n.length;l++){o.push("<tr>");o.push("<td>"+(l+1)+"</td>");o.push('<td><a href="http://t.stock.iwookong.com/ajax/login/nologin.php?stock='+n[l].code+"&uid="+uid+'&token=token" target="_blank">'+n[l].code+"</a></td>");if(n[l].order_operation){o.push("<td>卖出</td>")}else{o.push("<td>买入</td>")}o.push("<td>"+n[l].order_price+"</td>");o.push("<td>"+n[l].order_nums+"</td>");o.push("<td>"+Utility.unixToDate4(n[l].order_time)+"</td>");if(n[l].status){o.push("<td>已成交</td>")}else{o.push("<td>未成交</td>")}o.push('<td class="call_back" data-order-id="'+n[l].id+'">撤销</td>');o.push("</tr>")}$(".orderStock table tbody").html(o.join(""))}})}function e(){trade.getUserRelatedOp({opcode:108},null,function(n){var l=[];var o=n.order_list;for(var m=0;m<o.length;m++){l.push("<tr>");l.push("<td>"+(m+1)+"</td>");l.push("<td>"+o[m].code+"</td>");if(o[m].order_operation){l.push("<td>卖出</td>")}else{l.push("<td>买入</td>")}l.push("<td>"+o[m].order_price+"</td>");l.push("<td>"+o[m].order_nums+"</td>");l.push("<td>"+o[m].amount+"</td>");l.push("<td>"+Utility.unixToDate4(o[m].order_time)+"</td>");l.push("</tr>")}$(".finishedOrder table tbody").html(l.join(""))})}function h(){trade.getUserRelatedOp({opcode:109},null,function(n){var m=[];var o=n.order_list;for(var l=0;l<o.length;l++){m.push("<tr>");m.push("<td>"+(l+1)+"</td>");m.push("<td>"+o[l].code+"</td>");if(o[l].order_operation){m.push("<td>卖出</td>")}else{m.push("<td>买入</td>")}m.push("<td>"+o[l].order_price+"</td>");m.push("<td>"+o[l].order_nums+"</td>");m.push("<td>"+o[l].amount+"</td>");m.push("<td>"+Utility.unixToDate4(o[l].order_time)+"</td>");m.push("</tr>")}$(".HistoryOrder table tbody").html(m.join(""))})}function a(){trade.getUserRelatedOp({opcode:110,end_time:"2017-01-12",start_time:"2017-01-20"},null,function(m){var o=[];var n=m.statement_list;for(var l=0;l<n.length;l++){o.push("<tr>");o.push("<td>"+Utility.unixToDate4(n[l].amount)+"</td>");o.push("<td>"+n[l].code+"</td>");if(n[l].order_operation){o.push("<td>卖出</td>")}else{o.push("<td>买入</td>")}o.push("<td>"+n[l].order_price+"</td>");o.push("<td>"+n[l].order_nums+"</td>");o.push("<td>"+n[l].commission+"</td>");o.push("<td>"+n[l].order_operation+"</td>");o.push("<td>"+n[l].stamp_duty+"</td>");o.push("<td>"+n[l].transfer_fee+"</td>");o.push("<td>"+n[l].available_capital+"</td>");o.push("</tr>")}$(".statement table tbody").html(o.join(""))})}k();i();b();f();c();d();e();h();a()});