"use strict";(function(d,g,j){var i="",f="";var e=Utility.getQueryStringByName("data");var n=d(".wk-company").attr("data-html-type");if(e){f=e.split(",")[0];i=e.split(",")[1]}d(".wk-toshow-name").html(decodeURI(f)+"("+i+")");d(j).attr("title",decodeURI(f)+"("+i+")"+d(j).attr("title"));Utility.getSinaStockData(i,function(p){var q=Utility.getStockStatus(p);d(".wk-topshow-price").html("¥"+q.price).addClass(Utility.getUpDownColor(q.updown));d(".wk-topshow-price-per").html(Utility.getPriceSymbol(q.updown)+q.updown.toFixed(2)+"("+Utility.getPriceSymbol(q.updown)+q.percent.toFixed(2)+"%)").addClass(Utility.getUpDownColor(q.percent))});d(".wk-com-info li a").click(function(){var p=d(this).attr("href");if(p.indexOf("data")<0){d(this).attr("target","_blank").attr("href",p+"?data="+f+","+i)}});k();function b(){company.getCompany({stockcode:i,htmltype:n},null,function(p){var q=[];if(p&&p.status===1){if(Object.keys(p.company_profile).length>0){q.push("<tr class='tr_title'><th width='32%'>公司名称</th><td width='68%'>"+p.company_profile.company_name+"</td></tr>");q.push("<tr><th>公司英文名称</th><td>"+p.company_profile.company_eng_name+"</td></tr>");q.push("<tr class='pro_bg'><th>曾用名</th><td>"+p.company_profile.used_name+"</td></tr>");q.push("<tr><th>A股代码</th><td>"+p.company_profile.A_stockcode+"</td></tr>");q.push("<tr class='pro_bg'><th>A股简称</th><td>"+p.company_profile.A_short+"</td></tr>");q.push("<tr><th>B股代码</th><td>"+p.company_profile.B_stockcode+"</td></tr>");q.push("<tr class='pro_bg'><th>B股简称</th><td>"+p.company_profile.B_short+"</td></tr>");q.push("<tr><th>H股代码</th><td>"+p.company_profile.H_stockcode+"</td></tr>");q.push("<tr class='pro_bg'><th>H股简称</th><td>"+p.company_profile.H_short+"</td></tr>");q.push("<tr><th>证券类别</th><td>"+p.company_profile.security_type+"</td></tr>");q.push("<tr class='pro_bg'><th>所属行业</th><td>"+p.company_profile.industry_involved+"</td></tr>");q.push("<tr><th>总经理</th><td>"+p.company_profile.ceo+"</td></tr>");q.push("<tr class='pro_bg'><th>法人代表</th><td>"+p.company_profile.law_person+"</td></tr>");q.push("<tr><th>董秘</th><td>"+p.company_profile.secretary+"</td></tr>");q.push("<tr class='pro_bg'><th>董事长</th><td>"+p.company_profile.chairman+"</td></tr>");q.push("<tr><th>证券事务代表</th><td>"+p.company_profile.security_agent+"</td></tr>");q.push("<tr class='pro_bg'><th>独立董事</th><td>"+p.company_profile.independent_director+"</td></tr>");q.push("<tr><th>联系电话</th><td>"+p.company_profile.company_tel+"</td></tr>");q.push("<tr class='pro_bg'><th>电子信箱</th><td>"+p.company_profile.company_email+"</td></tr>");q.push("<tr><th>传真</th><td>"+p.company_profile.company_fax+"</td></tr>");q.push("<tr class='pro_bg'><th>公司网址</th><td>"+p.company_profile.company_website+"</td></tr>");q.push("<tr><th>办公地址</th><td>"+p.company_profile.business_address+"</td></tr>");q.push("<tr class='pro_bg'><th>注册地址</th><td>"+p.company_profile.reg_address+"</td></tr>");q.push("<tr><th>区域</th><td>"+p.company_profile.area+"</td></tr>");q.push("<tr class='pro_bg'><th>邮政编码</th><td>"+p.company_profile.post_code+"</td></tr>");q.push("<tr><th>注册资本(元)</th><td>"+p.company_profile.reg_captial+"</td></tr>");q.push("<tr class='pro_bg'><th>工商登记</th><td>"+p.company_profile.business_registration+"</td></tr>");q.push("<tr><th>雇员人数</th><td>"+p.company_profile.employee_num+"</td></tr>");q.push("<tr class='pro_bg'><th>管理人员人数</th><td>"+p.company_profile.admin_num+"</td></tr>");q.push("<tr><th>律师事务所</th><td>"+p.company_profile.law_firm+"</td></tr>");q.push("<tr class='pro_bg'><th>会计师事务所</th><td>"+p.company_profile.accounting_firm+"</td></tr>");q.push("<tr><th>公司简介</th><td>"+p.company_profile.company_intro+"</td></tr>");q.push("<tr class='pro_bg'><th>经营范围</th><td>"+p.company_profile.business_scope+"</td></tr>")}else{q.push("<tr class='no_date'><td colspan='2'><img src='../../static/imgs/i/index_nodata.png'>&nbsp;&nbsp;暂无数据</td>")}d(".profile table").html(q.join(""))}})}function h(){company.getCompany({stockcode:i,htmltype:n},null,function(r){var q=[];var u=["公告日期","总股本","国家持股","流通受限股份","国家持股(受限)","国有法人持股","国有法人持股(受限)","外资持股(受限)","其他内资持股(受限)","已流通股份","发起人股份","未流通股份","已上市流通A股","已上市流通B股","自然人持股","境内自然人持股","境外上市流通股","境外法人持股","境内法人持股","募集法人持股","变动原因"];var t=["date","general_capital","state_backing","float_stock_limit","state_backing_limit","legalperson_sharehold","legalperson_sharehold_limit","foreign_sharehold_limit","other_domes_sharehold","float_share","sponsor_share","not_float_share","float_A_stock","float_B_stock","natural_sharehold","in_natural_sharehold","out_float_stock","out_legalperson_sharehold","in_legalperson_sharehold","raise_sharehold","change_reason"];if(r&&r.status===1){if(r.result.length>0){for(var s=0;s<21;s++){if(s%2===0&&s===0){q.push("<tr style='color:#051b5d;background:#fafcfe'><td>"+u[s]+"</td>")}else{if(s%2===0){q.push("<tr class='table_title'><td>"+u[s]+"</td>")}else{q.push("<tr><td>"+u[s]+"</td>")}}for(var p=0;p<r.result.length;p++){q.push("<td>"+(r.result[p][t[s]]||"--")+"</td>")}q.push("</tr>")}}else{q.push("<tr class='no_date'><td><img src='../../static/imgs/i/index_nodata.png'>&nbsp;&nbsp;暂无数据</td>")}d(".cap_stru table").html(q.join(""))}})}function o(){company.getCompany({stockcode:i,htmltype:n},null,function(r){var p=[];var t=[];if(r&&r.status===1){if(r.stock_executive.length>0){for(var s=0;s<r.stock_executive.length;s++){p.push("<tr>");if(r.stock_executive[s].number==""){p.push("<td><b>--</b></td>")}else{p.push("<td><b>"+r.stock_executive[s].number+"</b></td>")}if(r.stock_executive[s].name==""){p.push("<td>--</td>")}else{p.push("<td>"+r.stock_executive[s].name+"</td>")}if(r.stock_executive[s].sex==""){p.push("<td>--</td>")}else{p.push("<td>"+r.stock_executive[s].sex+"</td>")}if(r.stock_executive[s].age==""){p.push("<td>--</td>")}else{p.push("<td>"+r.stock_executive[s].age+"</td>")}if(r.stock_executive[s].education==""){p.push("<td>--</td>")}else{p.push("<td>"+r.stock_executive[s].education+"</td>")}if(r.stock_executive[s].duty==""){p.push("<td>--</td>")}else{p.push("<td>"+r.stock_executive[s].duty+"</td>")}p.push("</tr>")}}else{p.push("<tr class='no_date' style='background:#fff'><td colspan='6'><img src='../../static/imgs/i/index_nodata.png'>&nbsp;&nbsp;暂无数据</td></tr>")}if(r.executive_profile.length>0){console.log(r.executive_profile);for(var q=0;q<r.executive_profile.length;q++){if(r.executive_profile[q].name==""){t.push("<tr><th colspan='2' width='20%'>--</th>")}else{t.push("<tr><th colspan='2' width='20%'>"+r.executive_profile[q].name+"</th>")}if(r.executive_profile[q].brief_intro==""){t.push("<td rowspan='3'>--</td></tr>")}else{t.push("<td rowspan='3'>"+r.executive_profile[q].brief_intro+"</td></tr>")}if(r.executive_profile[q].sex==""){t.push("<tr><td>性别：--</td>")}else{t.push("<tr><td>性别："+r.executive_profile[q].sex+"</td>")}if(r.executive_profile[q].education==""){t.push("<td>--</td></tr>")}else{t.push("<td>"+r.executive_profile[q].education+"</td></tr>")}if(r.executive_profile[q].position==""){t.push(" <tr><td colspan='2'>--</td></tr><tr><td colspan='3'></td></tr>")}else{t.push(" <tr><td colspan='2'>"+r.executive_profile[q].position+"</td></tr><tr><td colspan='3'></td></tr>")}t.push("</tr>")}}else{t.push("<tr class='no_date' style='background:#fff'><td colspan='3'><img src='../../static/imgs/i/index_nodata.png'>&nbsp;&nbsp;暂无数据</td></tr>")}d(".row1 tbody").html(p.join(""));d(".row2 tbody").html(t.join(""))}})}function l(){company.getCompany({stockcode:i,htmltype:n},null,function(t){if(t&&t.status===1){var F=t.float_stockholder;var q=t.stockholder;if(F.length>0){var v=Object.keys(F).length;var E=v;for(var A=0;A<v;A++){var s=A+1;var r=F[A]["day"+s][A]["date"];d("#float_stock_holder_ul li").eq(A).find("a").html(r);var y=F[A]["day"+s];m("top_opt"+s,y,"top")}for(var x=0;x<5-v;x++){E++;d(".float_stockholder ul").find(d(".topli"+E)).hide()}}else{d(".float_stockholder ul").hide();d(".float_stockholder table").html("<tr class='no_date'><td><img src='../../static/imgs/i/index_nodata.png'>&nbsp;&nbsp;十大流通股东暂无数据</td>")}if(q.length>0){var D=Object.keys(q).length;var w=D;for(var z=0;z<D;z++){var C=z+1;var B=q[z]["day"+C][z]["date"];d("#stock_holder_ul li").eq(z).find("a").html(B);var p=q[z]["day"+C];m("bottom_opt"+C,p,"bottom")}for(var u=0;u<5-D;u++){w++;d(".stockholder ul").find(d(".botli"+w)).hide()}}else{d(".stockholder ul").hide();d(".stockholder table").html("<tr class='no_date'><td><img src='../../static/imgs/i/index_nodata.png'>&nbsp;&nbsp;十大股东暂无数据</td>")}}})}function m(p,u,z){d("#"+p).find("tbody").html(" ");for(var v=0;v<u.length;v++){var t=u[v]["rank"]||"--";var y=u[v]["stockholder_name"]||"--";var r=u[v]["stockholder_nature"]||"--";var B=u[v]["share_type"]||"--";var w=u[v]["shares_number"]||"--";var A=u[v]["total_ratio"]||"--";var x=u[v]["change_share"]||"--";var s=u[v]["change_ratio"]||"--";var q="";if(z==="top"){q="<tr><td>"+t+"</td><td>"+y+"</td><td>"+r+"</td><td>"+B+"</td><td>"+w+"</td><td>"+A+"</td><td>"+x+"</td><td>"+s+"</td></tr>"}else{if(z==="bottom"){q="<tr><td>"+t+"</td><td>"+y+"</td><td>"+B+"</td><td>"+w+"</td><td>"+A+"</td><td>"+x+"</td><td>"+s+"</td></tr>"}}d("#"+p).find("tbody").append(q)}}function k(){inforcenter.showGroup(null,function(p){if(p&&p.status===1){var r=[];r.push("<div class=\"btn-group\" style='float: right;'>");if(d(".wk-topshow-right .btn-group").length<=0){r.push('<button type="button" class="btn dropdown-toggle wk-btn-follow" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">');r.push("+ 关注");r.push("</button>");r.push('<ul class="dropdown-menu">');r.push("<li class='wk-follow-stock' data-follow-name='我的自选股'><a>我的自选股</a></li>");if(p.result.info.group_name.length>0){var s=p.result.info.group_name;for(var q=0;q<s.length;q++){r.push("<li class='wk-follow-stock' data-follow-name='"+s[q]+"'><a>"+s[q]+"</a></li>")}r.push('<li class="wk-follow-stock" id=\'addNewGroup\' data-follow-name="addNewGroup"><a href="javascript:">添加组合</a></li>')}d(".wk-topshow-right").append(r.join(""));r.push("</ul>");r.push("</div>")}a()}})}function a(){d(".wk-follow-stock").each(function(){var p=d(this).attr("data-follow-name");d(this).unbind("click").bind("click",function(){if(p==="addNewGroup"){swal({title:"添加组合",text:"组合名称不能超过6个汉字或12个字符",type:"input",html:true,showCancelButton:true,closeOnConfirm:false,confirmButtonText:"确定",cancelButtonText:"取消",animation:"slide-from-top",inputPlaceholder:"请输入组合名称"},function(q){if(q===false){return false}if(q===""){swal.showInputError("请输入组合名称");return false}if(Utility.getByteLen(q)>12){swal.showInputError("字符数超过限制");return false}inforcenter.addGroup({ori_name:q},null,function(r){if(r.status===1){swal({title:"",text:"添加<span style='color: #F8BB86'>"+q+"</span>组合成功",html:true,timer:1000,showConfirmButton:false});d("#addNewGroup").before("<li class='wk-follow-stock' data-follow-name='"+q+'\'><a href="#">'+q+"</a></li>");c(q,i,false);a()}else{if(r.status===0){swal({title:"",text:"添加<span style='color: #F8BB86'>"+q+"</span>组合异常,"+r.msg+"",html:true,timer:1000,showConfirmButton:false})}}})})}else{c(p,i,true)}})})}function c(r,q,p){inforcenter.addStock({ori_name:r,code:q},null,function(s){if(s.status===1){if(p){swal({title:"",text:"关注个股<span style='color: #F8BB86'>"+decodeURI(f)+"("+i+")</span>成功",html:true,timer:1000,showConfirmButton:false})}}else{if(s.status===0){swal({title:"",text:"关注个股<span style='color: #F8BB86'>"+decodeURI(f)+"("+i+")</span>异常,"+s.msg+"",html:true,timer:1000,showConfirmButton:false})}else{swal({title:"",text:"关注个股<span style='color: #F8BB86'>"+decodeURI(f)+"("+i+")</span>异常,未知原因",html:true,timer:1000,showConfirmButton:false})}}})}if(n==="profile"){b()}else{if(n==="cap_stru"){h()}else{if(n==="executives"){o()}else{if(n==="stockholder"){l()}}}}})(jQuery,window,document);