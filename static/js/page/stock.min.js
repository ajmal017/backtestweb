"use strict";(function(e,k,p){var f=Utility.getQueryStringByName("stock");var m="";var a=["0:00","1:00","2:00","3:00","4:00","5:00","6:00","7:00","8:00","9:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00","20:00","21:00","22:00","23:00","24：00"];var q=[],d=[],u=[];var o,y;var j=f+"s";var c=echarts.init(p.getElementById("left-hot-chart"));c.showLoading({text:"加载中..."});function v(C,B,E,D){return"<a href='hotrank.php?key="+C+","+B+","+E+","+D+"' class='wk-view-more' target='_blank'>更多&nbsp;<i class='fa fa-angle-double-right'></i></a>"}function r(){var B=echarts.init(p.getElementById("left-hot-chart"));common.getSingleRealTimeHot({stock:f,hour_data:"stock"},function(){B.showLoading({text:"加载中..."})},function(D){if(D.status==1){var C=[];var P=[];if(D.visit){var H=0;for(var N in D.visit){if(D.visit.hasOwnProperty(N)){q.push(D.visit[N]);H++}}q=JSON.parse("["+q.join(",")+"]");var K=Math.max.apply(Math,q);var I=q.indexOf(Math.max.apply(Math,q));P.push("<tr><td>查看</td><td>"+q[q.length-1]+"</td><td>"+(Utility.getNowFormatDate()+" "+(H-1)+":00")+"</td></tr>");C.push("<tr><td>查看</td><td>"+K+"</td><td>"+Utility.calTime(I)+"</td></tr>")}if(D.search){var E=0;for(var Q in D.search){if(D.search.hasOwnProperty(Q)){d.push(D.search[Q]);E++}}d=JSON.parse("["+d.join(",")+"]");var O=Math.max.apply(Math,d);var J=d.indexOf(Math.max.apply(Math,d));P.push("<tr><td>搜索</td><td>"+d[d.length-1]+"</td><td>"+(Utility.getNowFormatDate()+" "+(E-1)+":00")+"</td></tr>");C.push("<tr><td>搜索</td><td>"+O+"</td><td>"+Utility.calTime(J)+"</td></tr>")}if(D.follow){var M=0;for(var G in D.follow){if(D.follow.hasOwnProperty(G)){u.push(D.follow[G]);M++}}u=JSON.parse("["+u.join(",")+"]");var F=Math.max.apply(Math,u);var L=u.indexOf(Math.max.apply(Math,u));P.push("<tr><td>关注</td><td>"+u[u.length-1]+"</td><td>"+(Utility.getNowFormatDate()+" "+(M-1)+":00")+"</td></tr>");C.push("<tr><td>关注</td><td>"+F+"</td><td>"+Utility.calTime(L)+"</td></tr>")}e(".todayhot").html(C.join(""));e(".latesthot").html(P.join(""));common.getLineChart("left-hot-chart",a,q,d,u)}})}function w(D){var G=["wk-industry-view-treemap","wk-concept-view-treemap"];for(var H in G){if(G.hasOwnProperty(H)){var K=echarts.init(p.getElementById(G[H]));K.showLoading({text:"加载中..."})}}if(D.status===1){var J=D.stock_info.industry;var C=D.stock_info.section;var L="";var B="";if(J.length>0){e(".hy-title").html(J[0].indus+"行业热度情况");for(var H in J){if(J.hasOwnProperty(H)){L+="<a href='industry.php?name="+J[H].indus+"' target='_blank'>"+J[H].indus+"</a>"}}}if(C.length>0){e(".gn-title").html(C[0].sect+"概念热度情况");for(var F in C){if(C.hasOwnProperty(F)){B+="<a href='concept.php?name="+C[F].sect+"' target='_blank'>"+C[F].sect+"</a>"}}}if(e("#industry-view").find(".col-md-5 .wk-hot-sub-title a").length<=0){e("#industry-view").find(".col-md-5 .wk-hot-sub-title").append(v(1,2,2,J[0].indus))}if(e("#industry-search").find(".col-md-5 .wk-hot-sub-title a").length<=0){e("#industry-search").find(".col-md-5 .wk-hot-sub-title").append(v(2,2,2,J[0].indus))}if(e("#industry-follow").find(".col-md-5 .wk-hot-sub-title a").length<=0){e("#industry-follow").find(".col-md-5 .wk-hot-sub-title").append(v(3,2,2,J[0].indus))}if(e("#concept-view").find(".col-md-5 .wk-hot-sub-title a").length<=0){e("#concept-view").find(".col-md-5 .wk-hot-sub-title").append(v(1,3,2,C[0].sect))}if(e("#concept-search").find(".col-md-5 .wk-hot-sub-title a").length<=0){e("#concept-search").find(".col-md-5 .wk-hot-sub-title").append(v(2,3,2,C[0].sect))}if(e("#concept-follow").find(".col-md-5 .wk-hot-sub-title a").length<=0){e("#concept-follow").find(".col-md-5 .wk-hot-sub-title").append(v(3,3,2,C[0].sect))}m=D.stock_info.stock_name;e(".wk-rate-select").attr("data-stock-name",m);e(".wk-toshow-name").html(m+"("+f+")");Utility.getSinaStockData(f,function(M){var N=Utility.getStockStatus(M);e(".wk-topshow-price").html("¥"+N.price).addClass(Utility.getUpDownColor(N.updown));e(".wk-topshow-price-per").html(Utility.getPriceSymbol(N.updown)+N.updown.toFixed(2)+"("+Utility.getPriceSymbol(N.updown)+N.percent.toFixed(2)+"%)").addClass(Utility.getUpDownColor(N.percent))});e(".wk-topshow-dp label").html(Utility.getTradeTime()).addClass("wk-up");e("title").html(D.stock_info.stock_name+"("+D.stock_info.stock_code+")热度情况");e(".wk-related-info").html('热度总览&nbsp;<i class="fa fa-question-circle-o" data-toggle="popover" data-content="'+D.stock_info.stock_name+'每小时产生的热度量"></i><span>行业：'+L+"</span><span>概念："+B+"");e("#wk-top-hots .latesthot-title").html(D.stock_info.stock_name+"最近热度");e("#wk-top-hots .todayhot-title").html(D.stock_info.stock_name+"今日最热度");e("#wk-top-stockdata .latesthot-title").html(D.stock_info.stock_name+"最新行情");e("#wk-top-moneyflow .latesthot-title").html(D.stock_info.stock_name+"资金流向");e("i[data-toggle='popover']").popover({container:"body",trigger:"hover"});var E=C[0].sect;var I=J[0].indus;if(!y){common.getTopTwentyStock({hottype:"gn",hotval:E},function(){e("#concept-view .wk-hot-table tbody").html("<tr><td colspan='5'>加载中...</td></tr>")},function(M){if(M.status===1){z(M);y=M}})}else{z(y)}if(!o){common.getTopTwentyStock({hottype:"hy",hotval:I},function(){e("#industry-view .wk-hot-table tbody").html("<tr><td colspan='5'>加载中...</td></tr>")},function(M){if(M.status===1){i(M);o=M}})}else{i(o)}t();x();s()}}function i(D){var H;if(D.result.code_info.shv_.length>0){var C=D.result.code_info.shv_;var F=D.result.code_info.suv_;e("#industry-view .wk-hot-table tbody").html(common.buildHotmapTable(C,"stock"));H=Utility.buildMapTable(F);e("#industry-view .right .toggle-treemap-table-up tbody").html(common.buildStockTable(H._up));e("#industry-view .right .toggle-treemap-table-down tbody").html(common.buildStockTable(H._down));common.buildHotmap("wk-industry-view-treemap",H._map,"stock")}if(D.result.code_info.shs_.length>0){var E=D.result.code_info.shs_;var I=D.result.code_info.sus_;e("#industry-search .wk-hot-table tbody").html(common.buildHotmapTable(E,"stock"));H=Utility.buildMapTable(I);e("#industry-search .right .toggle-treemap-table-up tbody").html(common.buildStockTable(H._up));e("#industry-search .right .toggle-treemap-table-down tbody").html(common.buildStockTable(H._down));common.buildHotmap("wk-industry-search-treemap",H._map,"stock")}if(D.result.code_info.shf_.length>0){var G=D.result.code_info.shf_;var B=D.result.code_info.suf_;e("#industry-follow .wk-hot-table tbody").html(common.buildHotmapTable(G,"stock"));H=Utility.buildMapTable(B);e("#industry-follow .right .toggle-treemap-table-up tbody").html(common.buildStockTable(H._up));e("#industry-follow .right .toggle-treemap-table-down tbody").html(common.buildStockTable(H._down));common.buildHotmap("wk-industry-follow-treemap",H._map,"stock")}}function z(D){var H;if(D.result.code_info.shv_.length>0){var C=D.result.code_info.shv_;var F=D.result.code_info.suv_;e("#concept-view .wk-hot-table tbody").html(common.buildHotmapTable(C,"stock"));H=Utility.buildMapTable(F);e("#concept-view .right .toggle-treemap-table-up tbody").html(common.buildStockTable(H._up));e("#concept-view .right .toggle-treemap-table-down tbody").html(common.buildStockTable(H._down));common.buildHotmap("wk-concept-view-treemap",H._map,"stock")}if(D.result.code_info.shs_.length>0){var E=D.result.code_info.shs_;var I=D.result.code_info.sus_;e("#concept-search .wk-hot-table tbody").html(common.buildHotmapTable(E,"stock"));H=Utility.buildMapTable(I);e("#concept-search .right .toggle-treemap-table-up tbody").html(common.buildStockTable(H._up));e("#concept-search .right .toggle-treemap-table-down tbody").html(common.buildStockTable(H._down));common.buildHotmap("wk-concept-search-treemap",H._map,"stock")}if(D.result.code_info.shf_.length>0){var G=D.result.code_info.shf_;var B=D.result.code_info.suf_;e("#concept-follow .wk-hot-table tbody").html(common.buildHotmapTable(G,"stock"));H=Utility.buildMapTable(B);e("#concept-follow .right .toggle-treemap-table-up tbody").html(common.buildStockTable(H._up));e("#concept-follow .right .toggle-treemap-table-down tbody").html(common.buildStockTable(H._down));common.buildHotmap("wk-concept-follow-treemap",H._map,"stock")}}function t(){var C=echarts.init(p.getElementById("wk-rate-line-pic"));var B={query_type:"stock",query_key:f,query_date:"today"};common.getRateLine(B,function(){C.showLoading({text:"加载中..."})},function(D){common.buildRateLine(m,"today",D);C.hideLoading()})}function x(){inforcenter.showGroup(null,function(B){if(B&&B.status===1){var D=[];D.push("<div class=\"btn-group\" style='float: right;'>");if(e(".wk-topshow-right .btn-group").length<=0){D.push('<button type="button" class="btn dropdown-toggle wk-btn-follow" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">');D.push("+ 关注");D.push("</button>");D.push('<ul class="dropdown-menu">');D.push("<li class='wk-follow-stock' data-follow-name='我的自选股'><a href=\"#\">我的自选股</a></li>");if(B.result.info.group_name.length>0){var E=B.result.info.group_name;for(var C=0;C<E.length;C++){D.push("<li class='wk-follow-stock' data-follow-name='"+E[C]+'\'><a href="#">'+E[C]+"</a></li>")}D.push('<li class="wk-follow-stock" id=\'addNewGroup\' data-follow-name="addNewGroup"><a href="javascript:">添加组合</a></li>')}e(".wk-topshow-right").append(D.join(""));D.push("</ul>");D.push("</div>")}l()}})}function l(){e(".wk-follow-stock").each(function(){var B=e(this).attr("data-follow-name");e(this).unbind("click").bind("click",function(){if(B=="addNewGroup"){swal({title:"添加组合",text:"组合名称不能超过6个汉字或12个字符",type:"input",html:true,showCancelButton:true,closeOnConfirm:false,confirmButtonText:"确定",cancelButtonText:"取消",animation:"slide-from-top",inputPlaceholder:"请输入组合名称"},function(C){if(C===false){return false}if(C===""){swal.showInputError("请输入组合名称");return false}if(Utility.getByteLen(C)>12){swal.showInputError("字符数超过限制");return false}inforcenter.addGroup({ori_name:C},null,function(D){if(D.status==1){swal({title:"",text:"添加<span style='color: #F8BB86'>"+C+"</span>组合成功",html:true,timer:1000,showConfirmButton:false});e("#addNewGroup").before("<li class='wk-follow-stock' data-follow-name='"+C+'\'><a href="#">'+C+"</a></li>");A(C,f,false);l()}else{if(D.status==0){swal({title:"",text:"添加<span style='color: #F8BB86'>"+C+"</span>组合异常,"+D.msg+"",html:true,timer:1000,showConfirmButton:false})}}})})}else{A(B,f,true)}})})}function A(D,C,B){inforcenter.addStock({ori_name:D,code:C},null,function(E){if(E.status===1){if(B){swal({title:"",text:"关注个股<span style='color: #F8BB86'>"+C+"</span>成功",html:true,timer:1000,showConfirmButton:false})}}else{if(E.status===0){swal({title:"",text:"关注个股<span style='color: #F8BB86'>"+C+"</span>异常,"+E.msg+"",html:true,timer:1000,showConfirmButton:false})}else{swal({title:"",text:"关注个股<span style='color: #F8BB86'>"+C+"</span>异常,未知原因",html:true,timer:1000,showConfirmButton:false})}}})}function s(){common.initRelateSHG(1,f,function(C){if(C&&C.status===1){var D=[];if(C.industry&&C.industry.length>0){D.push('{ "industry": "'+C.industry[0].industry+'", "concept": "'+C.notion[0].section+'" }')}var B=m+"("+f+")";common.buildReleatedInfoChart(B,C)}})}function b(){e(".modal-chart").modal("show");var B=echarts.init(p.getElementById("modal-chart"));common.getSingleRealTimeHot({stock:f},function(){B.showLoading({text:"加载中..."})},function(F){B.hideLoading();var E=[];var G=[];if(F.status===1){if(F.visit){for(var D in F.visit){if(F.visit.hasOwnProperty(D)){E.push(F.visit[D]);G.push('"'+Utility.numToTime(D)+'"')}}G=JSON.parse("["+G.join(",")+"]");E=JSON.parse("["+E.join(",")+"]")}var C=echarts.init(p.getElementById("modal-chart"));C.showLoading({text:"加载中..."});C.setOption({color:["rgb(243, 104, 97)"],tooltip:{trigger:"axis",formatter:function(J){var H="";H+=J[0].name+"<br>";for(var I in J){if(J.hasOwnProperty(I)){if(J[I].value&&J[I].value!==0){if(J[0].name===J[I].name){H+="<label style='color: "+J[I].color+";font-size: 14x;'>●</label>&nbsp;&nbsp;"+J[I].seriesName+":"+Utility.formatNum(J[I].value)+"<br>"}}}}return H}},dataZoom:[{type:"inside",realtime:true},{type:"slider",show:true,realtime:true}],grid:{top:10,left:20,right:20,bottom:40,containLabel:true},legend:{left:"left"},xAxis:{type:"category",boundaryGap:false,data:G},yAxis:{type:"value",position:"right",scale:true},calculable:false,series:[{name:"查看",type:"line",smooth:true,data:E}]});C.hideLoading();k.onresize=C.resize}})}function n(){e("#wk-show-chart-tip").html("<label>当前价：<span>--</span></label><label>成交量：<span>--</span>股</label><label>时间：<span>--</span></label><label>涨幅：<span>--</span></label>");var B=echarts.init(p.getElementById("left-stockdata-chart"));common.getCurve({code:f},function(){B.showLoading({text:"加载中..."})},function(F){var E=[];var D=[];var I=[];if(F.status===1){B.hideLoading();var H=F.result.code_info||[];if(H.length>0){for(var G=0,C=H.length;G<C;G++){I.push(Utility.unixToTime(H[G].time*1000));D.push(H[G].price);E.push({price:H[G].price,average_price:H[G].average_price,pcr:H[G].price_change_ratio,volume:H[G].volume,time:H[G].time})}}B.setOption({color:["rgb(12, 145, 179)"],tooltip:{trigger:"axis",formatter:function(M){var K=E[M[0].dataIndex];var J="";J+=M[0].name+"<br>";for(var L in M){if(M.hasOwnProperty(L)){if(M[L].value&&M[L].value!==0){if(M[0].name===M[L].name){J+="<label style='color: "+M[L].color+";font-size: 12x;'>●</label>&nbsp;&nbsp;"+M[L].seriesName+":"+Utility.formatNum(M[L].value)+"<br>"}}}}e("#wk-show-chart-tip").html("<label>当前价:<span class='"+Utility.getPriceColor(K.pcr)+"'>"+K.price+"</span></label><label>成交量:<span>"+(K.volume).toChineseNum()+"</span>股</label><label>时间:<span>"+Utility.unixToTime(K.time*1000)+"</span></label><label>涨幅：<span class='"+Utility.getPriceColor(K.pcr)+"'>"+Utility.getPriceSymbol(K.pcr)+""+K.pcr+"</span></label>");e(".wk-top-panelcon").mouseleave(function(){e("#wk-show-chart-tip").html("<label>当前价：<span>--</span></label><label>成交量：<span>--</span>股</label><label>时间：<span>--</span></label><label>涨幅：<span>--</span></label>")});return J}},grid:{top:"10px",left:"3%",right:"3%",bottom:10,containLabel:true},xAxis:{type:"category",boundaryGap:false,data:I,axisLabel:{interval:60}},yAxis:{type:"value",position:"right",scale:true},calculable:false,series:[{name:"大盘数据",type:"line",smooth:true,showSymbol:false,symbolSize:2,data:E.map(function(J){return J.price}),lineStyle:{normal:{width:1}}}]});k.onresize=B.resize}});common.getGrail({code:f},null,function(E){var D=[];if(E.status===1){var C=E.result.code_info;D.push("<tr><td>今开：<span>"+C.open.toFixed(2)+"</span></td><td>换手率：<span>"+C.amount.toFixed(2)+"</span></td></tr>");D.push("<tr><td>昨收：<span>"+C.settlement_.toFixed(2)+"</span></td><td>每股收益：<span>"+C.eps.toFixed(2)+"</span></td></tr>");D.push("<tr><td>最高：<span>"+C.high.toFixed(2)+"</span></td><td>总股本：<span>"+(C.totals*10000).toChineseNum()+"</span></td></tr>");D.push("<tr><td>最低：<span>"+C.low.toFixed(2)+"</span></td><td>总市值：<span>"+(C.zsz*10000).toChineseNum()+"</span></td></tr>");D.push("<tr><td>市盈率：<span>"+C.pe.toFixed(2)+"</span></td><td>流通市值：<span>"+(C.ltsz*10000).toChineseNum()+"</span></td></tr>");D.push("<tr><td>市净率：<span>"+C.pb.toFixed(2)+"</span></td><td>成交量：<span>"+(C.volume).toChineseNum()+"股</span></td></tr>");e("#wk-top-stockdata .right-infos table>tbody").html(D.join(""))}})}var h={query_type:1,key:f,start_id:0,info_type_list:"",start_time:0};e(".nav-tabs li a").bind("click",function(){if(e(this).attr("href").indexOf("#wk-selfmedia")===0){if(e("#mCSB_2_container").html().trim()===""){h.start_id=0;h.start_time=0;common.getSelfMedia(h,true)}}if(e(this).attr("href").indexOf("#wk-newsflash")===0){if(e("#wk-newsflash table>tbody").html().trim()===""){h.start_id=0;h.start_time=0;common.getFastNews(h,true)}}if(e(this).attr("href").indexOf("#wk-notice")===0){if(e("#mCSB_4_container").html().trim()===""){h.start_id=0;common.getNotice(h,true)}}if(e(this).attr("href").indexOf("#wk-report")===0){if(e("#mCSB_5_container").html().trim()===""){h.start_id=0;common.getReports(h,true)}}});e("#wk-news").mCustomScrollbar({autoHideScrollbar:true,theme:"minimal-dark",axis:"y",callbacks:{onTotalScroll:function(){if(e("#wk-news .wk-news-list:last").attr("id")){h.start_id=e("#wk-news .wk-news-list:last").attr("id").replace("news_","");h.info_type_list="1,0,0,0,0,0";h.timestamp=e("#wk-news .wk-news-list:last").attr("data-news-timestamp");common.getNews(h)}}}});e("#wk-selfmedia").mCustomScrollbar({autoHideScrollbar:true,theme:"minimal-dark",axis:"y",callbacks:{onTotalScroll:function(){if(e("#wk-selfmedia .wk-news-list:last").attr("id")){h.start_id=e("#wk-selfmedia .wk-news-list:last").attr("id").replace("media_","");h.info_type_list="0,0,1,0,0,0";h.timestamp=e("#wk-selfmedia .wk-news-list:last").attr("data-media-timestamp");common.getSelfMedia(h)}}}});e("#wk-newsflash").mCustomScrollbar({autoHideScrollbar:true,theme:"minimal-dark",axis:"y",callbacks:{onTotalScroll:function(){if(e("#wk-newsflash .wk-user-fastnews:last-child").find("ul li:last-child").attr("id")){h.start_id=e("#wk-newsflash .wk-user-fastnews:last-child").find("ul li:last-child").attr("id").replace("fast_","");h.info_type_list="0,1,0,0,0,0";h.timestamp=e("#wk-newsflash  .wk-user-fastnews:last-child").find("ul li:last-child").attr("data-fastnews-timestamp");common.getFastNews(h)}}}});e("#wk-notice").mCustomScrollbar({autoHideScrollbar:true,theme:"minimal-dark",axis:"y",callbacks:{onTotalScroll:function(){if(e("#wk-notice .wk-news-list:last").attr("id")){h.start_id=e("#wk-notice .wk-news-list:last").attr("id").replace("notice_","");h.info_type_list="0,0,0,0,0,0,1";h.timestamp=e("#wk-notice .wk-news-list:last").attr("data-news-timestamp");common.getNotice(h)}}}});e("#wk-report").mCustomScrollbar({autoHideScrollbar:true,theme:"minimal-dark",axis:"y",callbacks:{onTotalScroll:function(){if(e("#wk-report .wk-news-list:last").attr("id")){h.start_id=e("#wk-report .wk-news-list:last").attr("id").replace("report_","");h.info_type_list="0,0,0,0,0,0,0,1";h.timestamp=e("#wk-report .wk-news-list:last").attr("data-news-timestamp");common.getNotice(h)}}}});e(".wk-line-toggle a").click(function(){e(this).addClass("line-active").siblings().removeClass("line-active");var B=e(this).parent().attr("data-query-type");var D=e(this).parent().attr("data-query-key");var E=e(this).attr("data-key");var C={query_type:B,key_name:D,time_type:E};if(E==="minute"){b();return}if(E==="day"){common.getLineChart("left-hot-chart",a,q,d,u)}else{common.getHotRecord(C,function(){var F=echarts.init(p.getElementById("left-hot-chart"));F.showLoading({text:"加载中..."})},function(G){var J=[];var L=[];var M=[];var I=[];if(G.status==1){for(var P in G.visit){if(G.visit.hasOwnProperty(P)){var N=G.visit[P];for(var O in N){if(N.hasOwnProperty(O)){I.push(O);J.push(N[O])}}}}for(var S in G.search){if(G.search.hasOwnProperty(S)){var R=G.search[S];for(var Q in R){if(R.hasOwnProperty(Q)){L.push(R[Q])}}}}for(var K in G.follow){if(G.follow.hasOwnProperty(K)){var H=G.follow[K];for(var F in H){if(H.hasOwnProperty(F)){M.push(H[F])}}}}}common.getLineChart("left-hot-chart",I,J,L,M)})}});e(".treemap-toggle span").click(function(){e(this).addClass("treemap-active").siblings().removeClass("treemap-active");var B=e(this).parent().parent().parent();if(e(this).html()==="热力图"){B.find(".toggle-treemap").show();B.find(".toggle-treemap-table-up").hide();B.find(".toggle-treemap-table-down").hide()}else{if(e(this).html()==="涨幅"){B.find(".toggle-treemap").hide();B.find(".toggle-treemap-table-up").show();B.find(".toggle-treemap-table-down").hide()}else{if(e(this).html()==="跌幅"){B.find(".toggle-treemap").hide();B.find(".toggle-treemap-table-up").hide();B.find(".toggle-treemap-table-down").show()}}}});e(".wk-rate-select label").click(function(){e(this).addClass("active").siblings().removeClass("active");var F=e(this).parent().attr("data-query-name");var D=e(this).parent().attr("data-query-type");var B=e(this).attr("data-toggle");var E=echarts.init(p.getElementById("wk-rate-line-pic"));var C={query_type:D,query_key:F,query_date:B};if(D==="stock"){if(m){F=m}}switch(B){case"today":common.getRateLine(C,function(){E.showLoading({text:"加载中..."})},function(G){common.buildRateLine(F,B,G);E.hideLoading()});break;case"week":common.getRateLine(C,function(){E.showLoading({text:"加载中..."})},function(G){common.buildRateLine(F,B,G);E.hideLoading()});break;case"month":common.getRateLine(C,function(){E.showLoading({text:"加载中..."})},function(G){common.buildRateLine(F,B,G);E.hideLoading()});break;case"threemonth":common.getRateLine(C,function(){E.showLoading({text:"加载中..."})},function(G){common.buildRateLine(F,B,G);E.hideLoading()});break;case"datacompare":common.getRateLine(C,function(){E.showLoading({text:"加载中..."})},function(G){E.hideLoading();g(G)});break;default:break}});function g(J){var B=[];var H=[];var E=[];var C=[];if(J.body&&J.body.list.length>0){var I=J.body.list;for(var F=0;F<I.length;F++){B.push(Utility.unixToTime(I[F].trade_time*1000));H.push(I[F].day_yield);E.push(I[F].hs300_day_yield);C.push(I[F].visit)}}var D=echarts.init(p.getElementById("wk-rate-line-pic"));var G={tooltip:{trigger:"axis",formatter:function(M){var K="";K+=M[0].name+"<br>";for(var L in M){if(M.hasOwnProperty(L)){if(M[L].seriesName!=="查看热度"){if(M[L].value&&M[L].value!==0){if(M[0].name===M[L].name){K+="<label style='color: "+M[L].color+";font-size: 14px;'>●</label>&nbsp;&nbsp;"+M[L].seriesName+":"+(M[L].value*100).toFixed(2)+"%<br>"}}}else{K+="<label style='color: "+M[L].color+";font-size: 14px;'>●</label>&nbsp;&nbsp;"+M[L].seriesName+":"+M[L].value+"<br>"}}}return K}},color:["rgb(151,47,134)","rgb(65,77,92)","rgb(250,100,100)"],legend:{data:["收益率","沪深300","查看热度"],top:0},grid:{top:"25px",left:0,right:0,bottom:0,containLabel:true},xAxis:{type:"category",boundaryGap:false,data:B,axisLabel:{interval:10}},yAxis:[{type:"value",position:"right",axisLabel:{formatter:function(K){if(K!==0){return(K*100).toFixed(2)+"%"}else{return 0}}}},{type:"value",position:"left"}],series:[{name:"收益率",type:"line",smooth:true,yAxisIndex:0,data:JSON.parse("["+H+"]")},{name:"沪深300",type:"line",smooth:true,yAxisIndex:0,data:JSON.parse("["+E+"]")},{name:"查看热度",type:"line",smooth:true,yAxisIndex:1,data:JSON.parse("["+C+"]")}]};D.setOption(G);k.onresize=D.resize}e(".wk-topcharts-box ul>li>a").bind("click",function(){if(e(this).attr("aria-controls")==="wk-top-stockdata"){n()}});common.getStockBase({stock:f},function(){},function(B){w(B);e('.wk-hotmap a[data-toggle="tab"]').on("shown.bs.tab",function(){w(B)})});common.getNews(h,true);r();common.initdoubleLine(1,j)})(jQuery,window,document);