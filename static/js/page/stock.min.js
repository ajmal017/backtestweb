"use strict";(function(f,k,p){var o=Utility.getQueryStringByName("stock");var v="";var a=["0:00","1:00","2:00","3:00","4:00","5:00","6:00","7:00","8:00","9:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00","20:00","21:00","22:00","23:00","24：00"];var q=[],e=[],u=[];var b,z;var i=Utility.getQueryStringByName("query_type");var l=o+"s";var d=echarts.init(p.getElementById("left-hot-chart"));d.showLoading({text:"加载中..."});function w(D,C,F,E){return"<a href='hotrank.php?key="+D+","+C+","+F+","+E+"' class='wk-view-more' target='_blank'>更多&nbsp;<i class='fa fa-angle-double-right'></i></a>"}function r(){var C=echarts.init(p.getElementById("left-hot-chart"));common.getSingleRealTimeHot({stock:o,hour_data:"stock"},function(){C.showLoading({text:"加载中..."})},function(E){if(E.status==1){var F=[];var D=[];if(E.visit){var K=0;for(var P in E.visit){q.push(E.visit[P]);K++}q=JSON.parse("["+q.join(",")+"]");var O=Math.max.apply(Math,q);var H=q.indexOf(Math.max.apply(Math,q));D.push("<tr><td>查看</td><td>"+q[q.length-1]+"</td><td>"+(Utility.getNowFormatDate()+" "+(K-1)+":00")+"</td></tr>");F.push("<tr><td>查看</td><td>"+O+"</td><td>"+Utility.calTime(H)+"</td></tr>")}if(E.search){var G=0;for(var R in E.search){e.push(E.search[R]);G++}e=JSON.parse("["+e.join(",")+"]");var Q=Math.max.apply(Math,e);var I=e.indexOf(Math.max.apply(Math,e));D.push("<tr><td>搜索</td><td>"+e[e.length-1]+"</td><td>"+(Utility.getNowFormatDate()+" "+(G-1)+":00")+"</td></tr>");F.push("<tr><td>搜索</td><td>"+Q+"</td><td>"+Utility.calTime(I)+"</td></tr>")}if(E.follow){var N=0;for(var M in E.follow){u.push(E.follow[M]);N++}u=JSON.parse("["+u.join(",")+"]");var L=Math.max.apply(Math,u);var J=u.indexOf(Math.max.apply(Math,u));D.push("<tr><td>关注</td><td>"+u[u.length-1]+"</td><td>"+(Utility.getNowFormatDate()+" "+(N-1)+":00")+"</td></tr>");F.push("<tr><td>关注</td><td>"+L+"</td><td>"+Utility.calTime(J)+"</td></tr>")}f(".todayhot").html(F.join(""));f(".latesthot").html(D.join(""));common.getLineChart("left-hot-chart",a,q,e,u)}})}function x(C){var G=["wk-industry-view-treemap","wk-concept-view-treemap"];for(var H in G){var M=echarts.init(p.getElementById(G[H]));M.showLoading({text:"加载中..."})}if(C.status==1){var I=C.stock_info.industry;var L=C.stock_info.section;var K="";var J="";if(I.length>0){f(".hy-title").html(I[0].indus+"行业热度情况");for(var H in I){K+="<a href='industry.php?name="+I[H].indus+"' target='_blank'>"+I[H].indus+"</a>"}}if(L.length>0){f(".gn-title").html(L[0].sect+"概念热度情况");for(var F in L){J+="<a href='concept.php?name="+L[F].sect+"' target='_blank'>"+L[F].sect+"</a>"}}if(f("#industry-view").find(".col-md-5 .wk-hot-sub-title a").length<=0){f("#industry-view").find(".col-md-5 .wk-hot-sub-title").append(w(1,2,2,I[0].indus))}if(f("#industry-search").find(".col-md-5 .wk-hot-sub-title a").length<=0){f("#industry-search").find(".col-md-5 .wk-hot-sub-title").append(w(2,2,2,I[0].indus))}if(f("#industry-follow").find(".col-md-5 .wk-hot-sub-title a").length<=0){f("#industry-follow").find(".col-md-5 .wk-hot-sub-title").append(w(3,2,2,I[0].indus))}if(f("#concept-view").find(".col-md-5 .wk-hot-sub-title a").length<=0){f("#concept-view").find(".col-md-5 .wk-hot-sub-title").append(w(1,3,2,L[0].sect))}if(f("#concept-search").find(".col-md-5 .wk-hot-sub-title a").length<=0){f("#concept-search").find(".col-md-5 .wk-hot-sub-title").append(w(2,3,2,L[0].sect))}if(f("#concept-follow").find(".col-md-5 .wk-hot-sub-title a").length<=0){f("#concept-follow").find(".col-md-5 .wk-hot-sub-title").append(w(3,3,2,L[0].sect))}v=C.stock_info.stock_name;f(".wk-rate-select").attr("data-stock-name",v);f(".wk-toshow-name").html(v+"("+o+")");Utility.getSinaStockData(o,function(O){var N=Utility.getStockStatus(O);f(".wk-topshow-price").html("¥"+N.price).addClass(Utility.getUpDownColor(N.updown));f(".wk-topshow-price-per").html(Utility.getPriceSymbol(N.updown)+N.updown.toFixed(2)+"("+Utility.getPriceSymbol(N.updown)+N.percent.toFixed(2)+"%)").addClass(Utility.getUpDownColor(N.percent))});f(".wk-topshow-dp label").html(Utility.getTradeTime()).addClass("wk-up");f("title").html(C.stock_info.stock_name+"("+C.stock_info.stock_code+")热度情况");f(".wk-related-info").html('热度总览&nbsp;<i class="fa fa-question-circle-o" data-toggle="popover" data-content="'+C.stock_info.stock_name+'每小时产生的热度量"></i><span>行业：'+K+"</span><span>概念："+J+"");f("#wk-top-hots .latesthot-title").html(C.stock_info.stock_name+"最近热度");f("#wk-top-hots .todayhot-title").html(C.stock_info.stock_name+"今日最热度");f("#wk-top-stockdata .latesthot-title").html(C.stock_info.stock_name+"最新行情");f("#wk-top-moneyflow .latesthot-title").html(C.stock_info.stock_name+"资金流向");f("i[data-toggle='popover']").popover({container:"body",trigger:"hover"});var E=L[0].sect;var D=I[0].indus;if(!z){common.getTopTwentyStock({hottype:"gn",hotval:E},function(){f("#concept-view .wk-hot-table tbody").html("<tr><td colspan='5'>加载中...</td></tr>")},function(N){if(N.status==1){A(N);z=N}})}else{A(z)}if(!b){common.getTopTwentyStock({hottype:"hy",hotval:D},function(){f("#industry-view .wk-hot-table tbody").html("<tr><td colspan='5'>加载中...</td></tr>")},function(N){if(N.status==1){j(N);b=N}})}else{j(b)}t();y();s()}}function j(E){if(E.result.code_info.shv_.length>0){var F=E.result.code_info.shv_;var H=E.result.code_info.suv_;f("#industry-view .wk-hot-table tbody").html(common.buildHotmapTable(F,"stock"));var J=Utility.buildMapTable(H);f("#industry-view .right .toggle-treemap-table-up tbody").html(common.buildStockTable(J._up));f("#industry-view .right .toggle-treemap-table-down tbody").html(common.buildStockTable(J._down));common.buildHotmap("wk-industry-view-treemap",J._map,"stock")}if(E.result.code_info.shs_.length>0){var G=E.result.code_info.shs_;var C=E.result.code_info.sus_;f("#industry-search .wk-hot-table tbody").html(common.buildHotmapTable(G,"stock"));var J=Utility.buildMapTable(C);f("#industry-search .right .toggle-treemap-table-up tbody").html(common.buildStockTable(J._up));f("#industry-search .right .toggle-treemap-table-down tbody").html(common.buildStockTable(J._down));common.buildHotmap("wk-industry-search-treemap",J._map,"stock")}if(E.result.code_info.shf_.length>0){var I=E.result.code_info.shf_;var D=E.result.code_info.suf_;f("#industry-follow .wk-hot-table tbody").html(common.buildHotmapTable(I,"stock"));var J=Utility.buildMapTable(D);f("#industry-follow .right .toggle-treemap-table-up tbody").html(common.buildStockTable(J._up));f("#industry-follow .right .toggle-treemap-table-down tbody").html(common.buildStockTable(J._down));common.buildHotmap("wk-industry-follow-treemap",J._map,"stock")}}function A(E){if(E.result.code_info.shv_.length>0){var F=E.result.code_info.shv_;var H=E.result.code_info.suv_;f("#concept-view .wk-hot-table tbody").html(common.buildHotmapTable(F,"stock"));var J=Utility.buildMapTable(H);f("#concept-view .right .toggle-treemap-table-up tbody").html(common.buildStockTable(J._up));f("#concept-view .right .toggle-treemap-table-down tbody").html(common.buildStockTable(J._down));common.buildHotmap("wk-concept-view-treemap",J._map,"stock")}if(E.result.code_info.shs_.length>0){var G=E.result.code_info.shs_;var C=E.result.code_info.sus_;f("#concept-search .wk-hot-table tbody").html(common.buildHotmapTable(G,"stock"));var J=Utility.buildMapTable(C);f("#concept-search .right .toggle-treemap-table-up tbody").html(common.buildStockTable(J._up));f("#concept-search .right .toggle-treemap-table-down tbody").html(common.buildStockTable(J._down));common.buildHotmap("wk-concept-search-treemap",J._map,"stock")}if(E.result.code_info.shf_.length>0){var I=E.result.code_info.shf_;var D=E.result.code_info.suf_;f("#concept-follow .wk-hot-table tbody").html(common.buildHotmapTable(I,"stock"));var J=Utility.buildMapTable(D);f("#concept-follow .right .toggle-treemap-table-up tbody").html(common.buildStockTable(J._up));f("#concept-follow .right .toggle-treemap-table-down tbody").html(common.buildStockTable(J._down));common.buildHotmap("wk-concept-follow-treemap",J._map,"stock")}}function t(){var D=echarts.init(p.getElementById("wk-rate-line-pic"));var C={query_type:"stock",query_key:o,query_date:"today"};common.getRateLine(C,function(){D.showLoading({text:"加载中..."})},function(E){common.buildRateLine(v,"today",E);D.hideLoading()})}function y(){inforcenter.showGroup(null,function(C){if(C&&C.status==1){var E=[];E.push("<div class=\"btn-group\" style='float: right;'>");if(f(".wk-topshow-right .btn-group").length<=0){E.push('<button type="button" class="btn dropdown-toggle wk-btn-follow" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">');E.push("+ 关注");E.push("</button>");E.push('<ul class="dropdown-menu">');E.push("<li class='wk-follow-stock' data-follow-name='我的自选股'><a href=\"#\">我的自选股</a></li>");if(C.result.info.group_name.length>0){var F=C.result.info.group_name;for(var D=0;D<F.length;D++){E.push("<li class='wk-follow-stock' data-follow-name='"+F[D]+'\'><a href="#">'+F[D]+"</a></li>")}E.push('<li class="wk-follow-stock" id=\'addNewGroup\' data-follow-name="addNewGroup"><a href="javascript:">添加组合</a></li>')}f(".wk-topshow-right").append(E.join(""));E.push("</ul>");E.push("</div>")}m()}})}function m(){f(".wk-follow-stock").each(function(){var C=f(this).attr("data-follow-name");f(this).unbind("click").bind("click",function(){if(C=="addNewGroup"){swal({title:"添加组合",text:"组合名称不能超过6个汉字或12个字符",type:"input",html:true,showCancelButton:true,closeOnConfirm:false,confirmButtonText:"确定",cancelButtonText:"取消",animation:"slide-from-top",inputPlaceholder:"请输入组合名称"},function(D){if(D===false){return false}if(D===""){swal.showInputError("请输入组合名称");return false}if(Utility.getByteLen(D)>12){swal.showInputError("字符数超过限制");return false}inforcenter.addGroup({ori_name:D},null,function(E){if(E.status==1){swal({title:"",text:"添加<span style='color: #F8BB86'>"+D+"</span>组合成功",html:true,timer:1000,showConfirmButton:false});f("#addNewGroup").before("<li class='wk-follow-stock' data-follow-name='"+D+'\'><a href="#">'+D+"</a></li>");B(D,o,false);m()}else{if(E.status==0){swal({title:"",text:"添加<span style='color: #F8BB86'>"+D+"</span>组合异常,"+E.msg+"",html:true,timer:1000,showConfirmButton:false})}}})})}else{B(C,o,true)}})})}function B(E,C,D){inforcenter.addStock({ori_name:E,code:C},null,function(F){if(F.status==1){if(D){swal({title:"",text:"关注个股<span style='color: #F8BB86'>"+C+"</span>成功",html:true,timer:1000,showConfirmButton:false})}}else{if(F.status===0){swal({title:"",text:"关注个股<span style='color: #F8BB86'>"+C+"</span>异常,"+F.msg+"",html:true,timer:1000,showConfirmButton:false})}else{swal({title:"",text:"关注个股<span style='color: #F8BB86'>"+C+"</span>异常,未知原因",html:true,timer:1000,showConfirmButton:false})}}})}function s(){common.initRelateSHG(1,o,function(D){if(D&&D.status==1){var E=[];if(D.industry&&D.industry.length>0){E.push('{ "industry": "'+D.industry[0].industry+'", "concept": "'+D.notion[0].section+'" }')}var C=v+"("+o+")";common.buildReleatedInfoChart(C,D)}})}function c(){f(".modal-chart").modal("show");var C=echarts.init(p.getElementById("modal-chart"));common.getSingleRealTimeHot({stock:o},function(){C.showLoading({text:"加载中..."})},function(G){C.hideLoading();var F=[];var H=[];if(G.status==1){if(G.visit){for(var E in G.visit){F.push(G.visit[E]);H.push('"'+Utility.numToTime(E)+'"')}H=JSON.parse("["+H.join(",")+"]");F=JSON.parse("["+F.join(",")+"]")}var D=echarts.init(p.getElementById("modal-chart"));D.showLoading({text:"加载中..."});D.setOption({color:["rgb(243, 104, 97)"],tooltip:{trigger:"axis",formatter:function(K){var I="";I+=K[0].name+"<br>";for(var J in K){if(K[J].value&&K[J].value!=0){if(K[0].name==K[J].name){I+="<label style='color: "+K[J].color+";font-size: 14x;'>●</label>&nbsp;&nbsp;"+K[J].seriesName+":"+Utility.formatNum(K[J].value)+"<br>"}}}return I}},dataZoom:[{type:"inside",realtime:true},{type:"slider",show:true,realtime:true}],grid:{top:10,left:20,right:20,bottom:40,containLabel:true},legend:{left:"left"},xAxis:{type:"category",boundaryGap:false,data:H},yAxis:{type:"value",position:"right",scale:true},calculable:false,series:[{name:"查看",type:"line",smooth:true,data:F}]});D.hideLoading();k.onresize=D.resize}})}function n(){f("#wk-show-chart-tip").html("<label>当前价：<span>--</span></label><label>成交量：<span>--</span>股</label><label>时间：<span>--</span></label><label>涨幅：<span>--</span></label>");var C=echarts.init(p.getElementById("left-stockdata-chart"));common.getCurve({code:o},function(){C.showLoading({text:"加载中..."})},function(G){var F=[];var E=[];var J=[];if(G.status==1){C.hideLoading();var I=G.result.code_info||[];if(I.length>0){for(var H=0,D=I.length;H<D;H++){J.push(Utility.unixToTime(I[H].time*1000));E.push(I[H].price);F.push({price:I[H].price,average_price:I[H].average_price,pcr:I[H].price_change_ratio,volume:I[H].volume,time:I[H].time})}}C.setOption({color:["rgb(12, 145, 179)"],tooltip:{trigger:"axis",formatter:function(N){var L=F[N[0].dataIndex];var K="";K+=N[0].name+"<br>";for(var M in N){if(N.hasOwnProperty(M)){if(N[M].value&&N[M].value!=0){if(N[0].name==N[M].name){K+="<label style='color: "+N[M].color+";font-size: 12x;'>●</label>&nbsp;&nbsp;"+N[M].seriesName+":"+Utility.formatNum(N[M].value)+"<br>"}}}}f("#wk-show-chart-tip").html("<label>当前价:<span class='"+Utility.getPriceColor(L.pcr)+"'>"+L.price+"</span></label><label>成交量:<span>"+(L.volume).toChineseNum()+"</span>股</label><label>时间:<span>"+Utility.unixToTime(L.time*1000)+"</span></label><label>涨幅：<span class='"+Utility.getPriceColor(L.pcr)+"'>"+Utility.getPriceSymbol(L.pcr)+""+L.pcr+"</span></label>");f(".wk-top-panelcon").mouseleave(function(){f("#wk-show-chart-tip").html("<label>当前价：<span>--</span></label><label>成交量：<span>--</span>股</label><label>时间：<span>--</span></label><label>涨幅：<span>--</span></label>")});return K}},grid:{top:"10px",left:"3%",right:"3%",bottom:10,containLabel:true},xAxis:{type:"category",boundaryGap:false,data:J,axisLabel:{interval:60}},yAxis:{type:"value",position:"right",scale:true},calculable:false,series:[{name:"大盘数据",type:"line",smooth:true,showSymbol:false,symbolSize:2,data:F.map(function(K){return K.price}),lineStyle:{normal:{width:1}}}]});k.onresize=C.resize}});common.getGrail({code:o},null,function(F){var E=[];if(F.status==1){var D=F.result.code_info;E.push("<tr><td>今开：<span>"+D.open.toFixed(2)+"</span></td><td>换手率：<span>"+D.amount.toFixed(2)+"</span></td></tr>");E.push("<tr><td>昨收：<span>"+D.settlement_.toFixed(2)+"</span></td><td>每股收益：<span>"+D.eps.toFixed(2)+"</span></td></tr>");E.push("<tr><td>最高：<span>"+D.high.toFixed(2)+"</span></td><td>总股本：<span>"+(D.totals*10000).toChineseNum()+"</span></td></tr>");E.push("<tr><td>最低：<span>"+D.low.toFixed(2)+"</span></td><td>总市值：<span>"+(D.zsz*10000).toChineseNum()+"</span></td></tr>");E.push("<tr><td>市盈率：<span>"+D.pe.toFixed(2)+"</span></td><td>流通市值：<span>"+(D.ltsz*10000).toChineseNum()+"</span></td></tr>");E.push("<tr><td>市净率：<span>"+D.pb.toFixed(2)+"</span></td><td>成交量：<span>"+(D.volume).toChineseNum()+"股</span></td></tr>");f("#wk-top-stockdata .right-infos table>tbody").html(E.join(""))}})}var h={query_type:1,key:o,start_id:0,info_type_list:"",start_time:0};f(".nav-tabs li a").bind("click",function(){if(f(this).attr("href").indexOf("#wk-selfmedia")==0){if(f("#mCSB_2_container").html().trim()==""){h.start_id=0;h.start_time=0;common.getSelfMedia(h,true)}}if(f(this).attr("href").indexOf("#wk-newsflash")==0){if(f("#wk-newsflash table>tbody").html().trim()==""){h.start_id=0;h.start_time=0;common.getFastNews(h,true)}}if(f(this).attr("href").indexOf("#wk-notice")==0){if(f("#mCSB_4_container").html().trim()==""){h.start_id=0;common.getNotice(h,true)}}if(f(this).attr("href").indexOf("#wk-report")==0){if(f("#mCSB_5_container").html().trim()==""){h.start_id=0;common.getReports(h,true)}}});f("#wk-news").mCustomScrollbar({autoHideScrollbar:true,theme:"minimal-dark",axis:"y",callbacks:{onTotalScroll:function(){if(f("#wk-news .wk-news-list:last").attr("id")){h.start_id=f("#wk-news .wk-news-list:last").attr("id").replace("news_","");h.info_type_list="1,0,0,0,0,0";h.timestamp=f("#wk-news .wk-news-list:last").attr("data-news-timestamp");common.getNews(h)}}}});f("#wk-selfmedia").mCustomScrollbar({autoHideScrollbar:true,theme:"minimal-dark",axis:"y",callbacks:{onTotalScroll:function(){if(f("#wk-selfmedia .wk-news-list:last").attr("id")){h.start_id=f("#wk-selfmedia .wk-news-list:last").attr("id").replace("media_","");h.info_type_list="0,0,1,0,0,0";h.timestamp=f("#wk-selfmedia .wk-news-list:last").attr("data-media-timestamp");common.getSelfMedia(h)}}}});f("#wk-newsflash").mCustomScrollbar({autoHideScrollbar:true,theme:"minimal-dark",axis:"y",callbacks:{onTotalScroll:function(){if(f("#wk-newsflash .wk-user-fastnews:last-child").find("ul li:last-child").attr("id")){h.start_id=f("#wk-newsflash .wk-user-fastnews:last-child").find("ul li:last-child").attr("id").replace("fast_","");h.info_type_list="0,1,0,0,0,0";h.timestamp=f("#wk-newsflash  .wk-user-fastnews:last-child").find("ul li:last-child").attr("data-fastnews-timestamp");common.getFastNews(h)}}}});f("#wk-notice").mCustomScrollbar({autoHideScrollbar:true,theme:"minimal-dark",axis:"y",callbacks:{onTotalScroll:function(){if(f("#wk-notice .wk-news-list:last").attr("id")){h.start_id=f("#wk-notice .wk-news-list:last").attr("id").replace("notice_","");h.info_type_list="0,0,0,0,0,0,1";h.timestamp=f("#wk-notice .wk-news-list:last").attr("data-news-timestamp");common.getNotice(h)}}}});f("#wk-report").mCustomScrollbar({autoHideScrollbar:true,theme:"minimal-dark",axis:"y",callbacks:{onTotalScroll:function(){if(f("#wk-report .wk-news-list:last").attr("id")){h.start_id=f("#wk-report .wk-news-list:last").attr("id").replace("report_","");h.info_type_list="0,0,0,0,0,0,0,1";h.timestamp=f("#wk-report .wk-news-list:last").attr("data-news-timestamp");common.getNotice(h)}}}});f(".wk-line-toggle a").click(function(){f(this).addClass("line-active").siblings().removeClass("line-active");var E=f(this).parent().attr("data-query-type");var D=f(this).parent().attr("data-query-key");var F=f(this).attr("data-key");var C={query_type:E,key_name:D,time_type:F};if(F=="minute"){c();return}if(F=="day"){common.getLineChart("left-hot-chart",a,q,e,u)}else{common.getHotRecord(C,function(){var G=echarts.init(p.getElementById("left-hot-chart"));G.showLoading({text:"加载中..."})},function(H){var J=[];var L=[];var M=[];var I=[];if(H.status==1){for(var O in H.visit){for(var N in H.visit[O]){I.push(N);J.push(H.visit[O][N])}}for(var Q in H.search){for(var P in H.search[Q]){L.push(H.search[Q][P])}}for(var K in H.follow){for(var G in H.follow[K]){M.push(H.follow[K][G])}}}common.getLineChart("left-hot-chart",I,J,L,M)})}});f(".treemap-toggle span").click(function(){f(this).addClass("treemap-active").siblings().removeClass("treemap-active");var C=f(this).parent().parent().parent();if(f(this).html()=="热力图"){C.find(".toggle-treemap").show();C.find(".toggle-treemap-table-up").hide();C.find(".toggle-treemap-table-down").hide()}else{if(f(this).html()=="涨幅"){C.find(".toggle-treemap").hide();C.find(".toggle-treemap-table-up").show();C.find(".toggle-treemap-table-down").hide()}else{if(f(this).html()=="跌幅"){C.find(".toggle-treemap").hide();C.find(".toggle-treemap-table-up").hide();C.find(".toggle-treemap-table-down").show()}}}});f(".wk-rate-select label").click(function(){f(this).addClass("active").siblings().removeClass("active");var G=f(this).parent().attr("data-query-name");var E=f(this).parent().attr("data-query-type");var C=f(this).attr("data-toggle");var F=echarts.init(p.getElementById("wk-rate-line-pic"));var D={query_type:E,query_key:G,query_date:C};if(E=="stock"){if(v){G=v}}switch(C){case"today":common.getRateLine(D,function(){F.showLoading({text:"加载中..."})},function(H){common.buildRateLine(G,C,H);F.hideLoading()});break;case"week":common.getRateLine(D,function(){F.showLoading({text:"加载中..."})},function(H){common.buildRateLine(G,C,H);F.hideLoading()});break;case"month":common.getRateLine(D,function(){F.showLoading({text:"加载中..."})},function(H){common.buildRateLine(G,C,H);F.hideLoading()});break;case"threemonth":common.getRateLine(D,function(){F.showLoading({text:"加载中..."})},function(H){common.buildRateLine(G,C,H);F.hideLoading()});break;case"datacompare":common.getRateLine(D,function(){F.showLoading({text:"加载中..."})},function(H){F.hideLoading();g(H)});break;default:break}});function g(C){var E=[];var H=[];var F=[];if(C.body&&C.body.list.length>0){var G=C.body.list;for(var D=0;D<G.length;D++){E.push(Utility.unixToTime(G[D].trade_time*1000));H.push(G[D].day_yield);F.push(G[D].hs300_day_yield)}}common.getSingleRealTimeHot({stock:o},null,function(J){var M=[];if(J.status==1){if(J.visit){for(var I in J.visit){M.push(J.visit[I])}var L=echarts.init(p.getElementById("wk-rate-line-pic"));var K={tooltip:{trigger:"axis",formatter:function(P){var N="";N+=P[0].name+"<br>";for(var O in P){if(P[O].seriesName!="查看热度"){if(P[O].value&&P[O].value!=0){if(P[0].name==P[O].name){N+="<label style='color: "+P[O].color+";font-size: 14px;'>●</label>&nbsp;&nbsp;"+P[O].seriesName+":"+(P[O].value*100).toFixed(2)+"%<br>"}}}else{N+="<label style='color: "+P[O].color+";font-size: 14px;'>●</label>&nbsp;&nbsp;"+P[O].seriesName+":"+P[O].value+"<br>"}}return N}},color:["rgb(151,47,134)","rgb(65,77,92)","rgb(250,100,100)"],legend:{data:["收益率","沪深300","查看热度"],top:0},grid:{top:"25px",left:0,right:0,bottom:0,containLabel:true},xAxis:{type:"category",boundaryGap:false,data:E,axisLabel:{interval:30}},yAxis:[{type:"value",position:"right",axisLabel:{formatter:function(N){if(N!=0){return(N*100).toFixed(2)+"%"}else{return 0}}}},{type:"value",position:"left"}],series:[{name:"收益率",type:"line",smooth:true,yAxisIndex:0,data:JSON.parse("["+H+"]")},{name:"沪深300",type:"line",smooth:true,yAxisIndex:0,data:JSON.parse("["+F+"]")},{name:"查看热度",type:"line",smooth:true,yAxisIndex:1,data:JSON.parse("["+M+"]")}]};L.setOption(K);k.onresize=L.resize}}})}f(".wk-topcharts-box ul>li>a").bind("click",function(){if(f(this).attr("aria-controls")=="wk-top-stockdata"){n()}});common.getStockBase({stock:o},function(){},function(C){x(C);f('.wk-hotmap a[data-toggle="tab"]').on("shown.bs.tab",function(){x(C)})});common.getNews(h,true);r();common.initdoubleLine(1,l)})(jQuery,window,document);