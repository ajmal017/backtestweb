"use strict";$(function(){$(".wk-head-search").typeahead({minLength:2,maxItem:20,order:"asc",hint:true,group:true,maxItemPerGroup:5,backdrop:false,dynamic:true,filter:false,emptyTemplate:'未找到 "{{query}}" 的相关信息',source:{"股票":{url:["ajax/ajax_search.php?message={{query}},","stock"]},"行业":{url:["ajax/ajax_search.php?message={{query}},","hy"]},"概念":{url:["ajax/ajax_search.php?message={{query}},","gn"]},"热点事件":{url:["ajax/ajax_search.php?message={{query}},","rd"]}},callback:{onClickAfter:function(d,b,c){if(c.display!==""){switch(c.group){case"股票":window.open("stocks.php?stock="+c.display.substring(c.display.indexOf("(")+1,c.display.indexOf(")")),"_blank");break;case"行业":window.open("industry.php?name="+c.display,"_blank");break;case"概念":window.open("concept.php?name="+c.display,"_blank");break;case"热点事件":window.open("hotevent.php?name="+c.display,"_blank");break;default:window.open("error.php","_blank");break}}}}});$(".wk-con-news .wk-con-box").mouseenter(function(){});$(".wk-con-news .wk-con-box").mouseleave(function(){});$("i[data-toggle='popover']").popover({container:"body",trigger:"hover"});$('.hot-map a[data-toggle="tab"]').on("shown.bs.tab",function(){initTreeMapChart()});$(".wk-line-toggle a").click(function(){$(this).addClass("line-active").siblings().removeClass("line-active");var c=$(this).parent().attr("data-query-type");var b=$(this).parent().attr("data-query-key");var d=$(this).attr("data-key");var a={query_type:c,key_name:b,time_type:d};if(d=="day"){common.getLineChart("left-chart",xdata,viewData,searchData,followData)}else{common.getHotRecord(a,function(){var e=echarts.init(document.getElementById("left-chart"));e.showLoading()},function(g){var i=[];var k=[];var l=[];var h=[];if(g.status==1){for(var n in g.visit){for(var m in g.visit[n]){h.push(m);i.push(g.visit[n][m])}}for(var p in g.search){for(var o in g.search[p]){k.push(g.search[p][o])}}for(var j in g.follow){for(var e in g.follow[j]){l.push(g.follow[j][e])}}}common.getLineChart("left-chart",h,i,k,l)})}});$(".treemap-toggle span").click(function(){$(this).addClass("treemap-active").siblings().removeClass("treemap-active");var a=$(this).parent().parent().parent();if($(this).html()=="图"){a.find(".toggle-treemap").show();a.find(".toggle-treemap-table").hide();initTreeMapChart()}else{a.find(".toggle-treemap").hide();a.find(".toggle-treemap-table").show()}});$(".wk-rate-select label").click(function(){$(this).addClass("active").siblings().removeClass("active");var a=$(this).attr("data-toogle");var c=echarts.init(document.getElementById("wk-rate-line-pic"));var b={tooltip:{trigger:"axis"},color:["rgb(151,47,134)","rgb(65,77,92)"],legend:{data:["平安银行","沪深300"],bottom:"0"},grid:{top:"8px",left:"0",right:"0",bottom:"10%",containLabel:true},xAxis:{type:"category",boundaryGap:false,data:["2016-06-18","2016-06-19","2016-06-20","2016-06-21","2016-06-22","2016-06-23","2016-06-24","2016-06-25","2016-06-26","2016-06-27","2016-06-28","2016-06-29","2016-06-30","2016-07-01"]},yAxis:{type:"value",position:"right"},series:[{name:"平安银行",type:"line",smooth:true,data:[120,132,101,134,90,230,210,120,132,101,134,90,230,210]},{name:"沪深300",type:"line",smooth:true,data:[220,182,191,234,290,330,310,134,90,230,210,120,132,101]}]};c.setOption(b);window.onresize=c.resize;switch(a){case"today":break;case"week":break;case"month":break;case"threemonth":break}})});