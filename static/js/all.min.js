"use strict";$(function(){$(".wk-head-search").typeahead({minLength:2,maxItem:20,order:"asc",hint:true,group:true,maxItemPerGroup:5,backdrop:false,dynamic:true,filter:false,emptyTemplate:'未找到 "{{query}}" 的相关信息',source:{"股票":{url:["ajax/ajax_search.php?message={{query}},","stock"]},"行业":{url:["ajax/ajax_search.php?message={{query}},","hy"]},"概念":{url:["ajax/ajax_search.php?message={{query}},","gn"]},"热点事件":{url:["ajax/ajax_search.php?message={{query}},","event"]}},callback:{onClickAfter:function(d,b,c){if(c.display!==""){switch(c.group){case"股票":window.open("stocks.php?stock="+c.display.substring(c.display.indexOf("(")+1,c.display.indexOf(")")),"_blank");break;case"行业":window.open("industry.php?name="+c.display,"_blank");break;case"概念":window.open("concept.php?name="+c.display,"_blank");break;case"热点事件":window.open("event.php?name="+c.display,"_blank");break;default:window.open("error.php","_blank");break}}}}});$(".wk-con-news .wk-con-box").mouseenter(function(){});$(".wk-con-news .wk-con-box").mouseleave(function(){});$("i[data-toggle='popover']").popover({container:"body",trigger:"hover"});$('.wk-hotmap a[data-toggle="tab"]').on("shown.bs.tab",function(){initTreeMapChart()});$(".wk-line-toggle a").click(function(){$(this).addClass("line-active").siblings().removeClass("line-active");var c=$(this).parent().attr("data-query-type");var b=$(this).parent().attr("data-query-key");var d=$(this).attr("data-key");var a={query_type:c,key_name:b,time_type:d};if(d=="day"){common.getLineChart("left-chart",xdata,viewData,searchData,followData)}else{common.getHotRecord(a,function(){var e=echarts.init(document.getElementById("left-chart"));e.showLoading({text:"加载中..."})},function(g){var i=[];var k=[];var l=[];var h=[];if(g.status==1){for(var n in g.visit){for(var m in g.visit[n]){h.push(m);i.push(g.visit[n][m])}}for(var p in g.search){for(var o in g.search[p]){k.push(g.search[p][o])}}for(var j in g.follow){for(var e in g.follow[j]){l.push(g.follow[j][e])}}}common.getLineChart("left-chart",h,i,k,l)})}});$(".treemap-toggle span").click(function(){$(this).addClass("treemap-active").siblings().removeClass("treemap-active");var a=$(this).parent().parent().parent();if($(this).html()=="热力图"){a.find(".toggle-treemap").show();a.find(".toggle-treemap-table-up").hide();a.find(".toggle-treemap-table-down").hide()}else{if($(this).html()=="涨幅"){a.find(".toggle-treemap").hide();a.find(".toggle-treemap-table-up").show();a.find(".toggle-treemap-table-down").hide()}else{if($(this).html()=="跌幅"){a.find(".toggle-treemap").hide();a.find(".toggle-treemap-table-up").hide();a.find(".toggle-treemap-table-down").show()}}}});$(".wk-rate-select label").click(function(){$(this).addClass("active").siblings().removeClass("active");var e=$(this).parent().attr("data-query-name");var c=$(this).parent().attr("data-query-type");var a=$(this).attr("data-toggle");var d=echarts.init(document.getElementById("wk-rate-line-pic"));var b={query_type:c,query_key:e,query_date:a};if(c=="stock"){if(_stockName){e=_stockName}}switch(a){case"today":common.getRateLine(b,function(){d.showLoading({text:"加载中..."})},function(f){common.buildRateLine(e,a,f);d.hideLoading()});break;case"week":common.getRateLine(b,function(){d.showLoading({text:"加载中..."})},function(f){common.buildRateLine(e,a,f);d.hideLoading()});break;case"month":common.getRateLine(b,function(){d.showLoading({text:"加载中..."})},function(f){common.buildRateLine(e,a,f);d.hideLoading()});break;case"threemonth":common.getRateLine(b,function(){d.showLoading({text:"加载中..."})},function(f){common.buildRateLine(e,a,f);d.hideLoading()});break;default:break}})});